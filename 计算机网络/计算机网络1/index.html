<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
<meta name="referrer" content="no-referrer">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/icon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/icon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yanglinqi107.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="学习自哈尔滨工业大学，应用层">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络概述及应用层">
<meta property="og:url" content="http://yanglinqi107.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C1/index.html">
<meta property="og:site_name" content="杨记">
<meta property="og:description" content="学习自哈尔滨工业大学，应用层">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171658033.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171658563.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171658913.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171658138.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171658733.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171659252.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171659721.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171659647.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171659201.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171659727.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171659259.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171659403.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700336.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700918.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700531.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700008.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700065.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700085.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700764.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700112.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700002.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171701268.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171701680.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171701656.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171701397.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171701242.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171701112.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171701115.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171702147.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171702545.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171702149.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171702596.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171702066.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171702024.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171702898.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171703334.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171703444.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171703581.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171703604.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/image-20220621145714579.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171704210.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171704633.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171704613.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171704180.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171704859.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171704174.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171705791.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171705978.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171705390.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171705825.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171705172.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171705794.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171705058.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171705055.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171706205.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171706934.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171706071.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171706243.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171706888.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171706074.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171707283.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171707966.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171707451.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171707337.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171707155.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171707971.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171707370.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171707509.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708430.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708478.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708724.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708824.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708068.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708805.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708431.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708129.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708879.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171709774.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171709145.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171709408.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171709474.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171709160.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171709258.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171709922.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171709014.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171710037.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171710706.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171710110.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171710302.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171710190.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171710048.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171711099.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171711591.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171711519.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171711074.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171711636.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171711961.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171711321.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171715110.png">
<meta property="og:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171715023.png">
<meta property="article:published_time" content="2022-05-17T14:55:52.477Z">
<meta property="article:modified_time" content="2022-08-24T06:26:10.477Z">
<meta property="article:author" content="yanglinqi">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171658033.png">

<link rel="canonical" href="http://yanglinqi107.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C1/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>计算机网络概述及应用层 | 杨记</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">杨记</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">碎片化学习令人焦虑，系统化学习使人进步</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">30</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">18</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">100</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yanglinqi107.github.io/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/headpic.jpg">
      <meta itemprop="name" content="yanglinqi">
      <meta itemprop="description" content="用于做笔记，对学过的知识总结">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨记">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          计算机网络概述及应用层
        </h1>

        <div class="post-meta">

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-05-17 22:55:52" itemprop="dateCreated datePublished" datetime="2022-05-17T22:55:52+08:00">2022-05-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-24 14:26:10" itemprop="dateModified" datetime="2022-08-24T14:26:10+08:00">2022-08-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>学习自哈尔滨工业大学，应用层</p>
<span id="more"></span>
<p><strong>bit</strong>  比特 或 位  1b</p>
<p><strong>Byte</strong> 字节 1B   </p>
<p>1B = 8b   一个字节等于8位</p>
<p><strong>Mbps（Million bits per second）</strong>Mb/s 兆比特每秒。即“传输速率”，带宽。营业厅的网线带宽说的“几兆”是指多少Mbps而不是MB/s</p>
<p>1 Kbps = $10^3$ bps</p>
<p>1 Mbps = $10^6$ bps</p>
<p>1B/s = 8 bps</p>
<p>8 Mbps = 1 MB/s  但实际情况中8M的宽带往往达不到1MB/s的速度</p>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p><strong>计算机网络=通信技术+计算机技术</strong></p>
<p><strong>通信系统模型</strong>：</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171658033.png" alt="image-20220315110530337"></p>
<p>计算机网络是一种<strong>通信网络</strong></p>
<p><strong>定义</strong>：计算机网络就是<strong>互连的、自治的</strong>计算机网络集合</p>
<ul>
<li><p>自治：无主从关系</p>
</li>
<li><p>互连：互联互通，<strong>通信链路</strong></p>
</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171658563.png" alt="image-20220315111009438"></p>
<p><strong>交换网络</strong></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171658913.png" alt="image-20220315111116809"></p>
<h3 id="Internet"><a href="#Internet" class="headerlink" title="Internet"></a><strong>Internet</strong></h3><p>全球最大的互联网络 ISP(Internet Service Provider)</p>
<p><strong>组成方面：</strong></p>
<ul>
<li>庞大的<strong>计算设备</strong>集合：主机（hosts）= 端系统（end systems），运行各种网络应用</li>
<li>通信链路：光纤，无线电，卫星。。。</li>
<li>分组交换：路由器（routers）、交换机（switches）</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171658138.png" alt="image-20220315112033308" style="zoom:80%;" /></p>
<p><strong>服务方面：</strong></p>
<ul>
<li>为网络应用提供通信服务的通信基础设施</li>
<li>为网络应用提供应用编程接口（API）</li>
</ul>
<h3 id="协议"><a href="#协议" class="headerlink" title="协议"></a><strong>协议</strong></h3><p>硬件（主机、路由器、通信链路等）是计算机网络的基础。</p>
<p>计算机网络中的数据交换必须遵守事先约定好的规则。</p>
<p><strong>网络协议（network protocol）</strong>，简称为协议，是为进行网络中的数据交换而建立的规则、标准或约定。</p>
<p>规定了通信实体之间所交换的消息的<strong>格式、意义、顺序</strong>以及针对收到信息或发生的事件所采取的<strong>“动作”（actions）</strong></p>
<p><strong>三要素</strong>：</p>
<ul>
<li>语法（Syntax）<ul>
<li>数据域控制信息的结构或格式</li>
<li>信号电平（操作系统层面）</li>
</ul>
</li>
<li>语义（Semantics）<ul>
<li>需要发出何种控制信息</li>
<li>完成何种动作以及做出何种响应</li>
<li>差错控制</li>
</ul>
</li>
<li>时序（Timing）<ul>
<li>事件顺序</li>
<li>速度匹配</li>
</ul>
</li>
</ul>
<h3 id="计算机网络结构"><a href="#计算机网络结构" class="headerlink" title="计算机网络结构"></a>计算机网络结构</h3><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171658733.png" alt="image-20220315121147117"></p>
<p><strong>网络边缘</strong>：</p>
<ul>
<li><p>客户/服务器（client/server）应用模型</p>
<ul>
<li>客户发送请求，接收服务器响应</li>
<li>如：Web应用，文件传输FTP应用</li>
</ul>
</li>
<li><p>对等（peer-peer，P2P）应用模型</p>
<ul>
<li>无（或不仅依赖）专用服务器</li>
<li>通信在<strong>对等</strong>实体之间直接进行</li>
<li>如：QQ，Skype</li>
</ul>
</li>
</ul>
<p><strong>接入网络：</strong></p>
<ul>
<li><p>数字用户线路（DSL）：独占</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171659252.png" alt="image-20220315120516184"></p>
</li>
<li><p>电缆网络</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171659721.png" alt="image-20220315120620201"></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171659647.png" alt="image-20220315120640206"></p>
</li>
<li><p>机构（企业）接入网络（Ethernet）</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171659201.png" alt="image-20220315120925922"></p>
</li>
<li><p>无线接入网络</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171659727.png" alt="image-20220315121009339"></p>
</li>
</ul>
<p><strong>网络核心：</strong></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171659259.png" alt="image-20220315121044682"></p>
<h3 id="Internet结构"><a href="#Internet结构" class="headerlink" title="Internet结构"></a><strong>Internet</strong>结构</h3><p><strong>网络之网络</strong></p>
<p>端系统通过接入ISP（access ISPs ）连接到Internet</p>
<p>接入ISP必须进一步互连，这样任意两个主机才可以互相发送分组</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171659403.png" alt="image-20220315122026227"></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700336.png" alt="image-20220315122042836"></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700918.png" alt="image-20220315122119662"></p>
<p>内容提供商网络（content provider networks，如： Google, Microsoft等）可能运行其自己的网络，并就近为端用户提供服务、内容。</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700531.png" alt="image-20220315122229145"></p>
<h3 id="网络核心之数据交换"><a href="#网络核心之数据交换" class="headerlink" title="网络核心之数据交换"></a>网络核心之数据交换</h3><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700008.png" alt="image-20220315140452557"></p>
<p><strong>交换的含义</strong>：</p>
<ul>
<li><p>动态转接</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700065.png" alt="image-20220315140552835"></p>
</li>
<li><p>动态分配传输资源</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700085.png" alt="image-20220315140613137"></p>
</li>
</ul>
<p><strong>数据交换的类型</strong>：</p>
<p><strong>1、电路交换：</strong></p>
<p>最典型电路交换网络：电话网络</p>
<p>电路交换的三个阶段：</p>
<ul>
<li>建立连接（呼叫/电路建立）</li>
<li>通信</li>
<li>释放连接（拆除电路）</li>
</ul>
<p>特点：独占资源</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700764.png" alt="image-20220315141048929"></p>
<p>电路交换网络如何共享中继线？— <strong>多路复用（Multiplexing）</strong></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700112.png" alt="image-20220315141151364" style="zoom: 67%;" /></p>
<p><strong>2、报文交换（message switching）</strong></p>
<p><strong>报文</strong>：源（应用）发送的<strong>信息整体</strong>。比如：一个文件</p>
<p>存储&amp;转发 ：路由器需要接收到完整的整个数据报文后，才能开始向下一跳发送</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171700002.png" alt="image-20220315150305484"></p>
<p><strong>3、分组交换（package switching）</strong></p>
<p><strong>分组</strong>：报文分拆出来的一系列相对较小的数据包</p>
<p>分组交换需要报文的<strong>拆分</strong>与<strong>重组</strong>，可能还会增加一个头部信息</p>
<p>产生<strong>额外开销</strong></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171701268.png" alt="image-20220315150619783" style="zoom:67%;" /></p>
<p>分组交换：<strong>统计多路复用</strong>（Statistical Multiplexing）</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171701680.png" alt="image-20220315151053772" style="zoom:67%;" /></p>
<p><strong>存储-转发（store-and-forward）</strong></p>
<p><strong>报文交换</strong>与<strong>分组交换</strong>均采用<strong>存储-转发</strong>交换方式</p>
<p>区别：</p>
<ul>
<li>报文交换以<strong>完整报文</strong>进行“存储-转发”</li>
<li>分组交换以<strong>较小的分组</strong>进行“存储-转发</li>
</ul>
<h3 id="分组交换VS报文交换"><a href="#分组交换VS报文交换" class="headerlink" title="分组交换VS报文交换"></a>分组交换VS报文交换</h3><p>报文交换:</p>
<ul>
<li>报文长度为M bits</li>
<li>链路带宽为R bps</li>
<li>每次传输报文需要 <strong>M/R</strong> 秒</li>
</ul>
<p>分组交换:</p>
<ul>
<li>报文被拆分为多个分组</li>
<li>分组长度为 L bits</li>
<li>每个分组传输时延为L/R秒</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171701656.png" alt="image-20220315155532109"></p>
<p>分组交换的报文交付时间：</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171701397.png" alt="image-20220315155800656"></p>
<p>报文：M bits，链路带宽（数据传输速率）：R bps，分组长度（大小）：L bits</p>
<p>跳步数：h，路由器数：n = h - 1</p>
<p>$T = M / R + (h-1)L/R = M/R+nL/R$ </p>
<h3 id="分组交换VS电路交换"><a href="#分组交换VS电路交换" class="headerlink" title="分组交换VS电路交换"></a>分组交换VS电路交换</h3><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171701242.png" alt="image-20220315161335265" style="zoom: 67%;" /></p>
<p><strong>分组交换</strong>适用于<strong>突发</strong>数据传输网络</p>
<ul>
<li>资源充分共享</li>
<li>简单、无需呼叫建立</li>
</ul>
<p>可能产生<strong>拥塞（congestion）</strong>: 分组延迟和丢失</p>
<ul>
<li>需要协议处理可靠数据传输和拥塞控制</li>
</ul>
<p>如何提供电路级性能保障? 例如：音/视频应用所需的带宽保障</p>
<h3 id="多路复用"><a href="#多路复用" class="headerlink" title="多路复用"></a>多路复用</h3><p>多路复用(multiplexing)，简称复用，是通信技术中的基本概念</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171701112.png" alt="image-20220315142554064"></p>
<p>多路复用(Multiplexing)：链路/网络资源（如带宽）划分为“资源片”</p>
<ul>
<li><p>将资源片分配给各路“呼叫”（calls）</p>
</li>
<li><p>每路呼叫独占分配到的资源片进行通信</p>
</li>
<li><p>资源片可能“闲置”(idle) (无共享)</p>
</li>
</ul>
<p><strong>典型多路复用方法:</strong></p>
<p><strong>1、频分多路复用（frequency division multiplexing-FDM）</strong></p>
<p>频分多路复用的各用户占用不同的带宽资源（请注意，这里的“带宽”是频率带宽（单位：Hz）而不是数据的发送速率）</p>
<p>用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171701115.png" alt="image-20220315143022398" style="zoom:80%;" /></p>
<p><strong>2、时分多路复用（time division multiplexing-TDM）</strong></p>
<p>时分复用则是将时间划分为一段段等长的时分复用帧（TDM 帧），每个用户在每个 TDM 帧中占用固定序号的时隙</p>
<p>每用户所占用的时隙是周期性出现（其周期就是TDM 帧的长度）</p>
<p>时分复用的所有用户是在不同的时间占用相同的频带宽度</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171702147.png" alt="image-20220315143259833"></p>
<p><strong>3、波分多路复用（Wavelength division multiplexing-WDM）</strong></p>
<p>波分复用就是<strong>光的频分复用</strong></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171702545.png" alt="image-20220315143354109"></p>
<p><strong>4、码分多路复用（Code division multiplexing-CDM）</strong></p>
<p>广泛应用于无线链路共享 (如蜂窝网，卫星通信等)</p>
<p>每 个 用 户 分 配 一 个唯 一 的 m bit 码片序列（chippingsequence），其中“0”用“-1”表示、“1”用“+1”表示，例如：S 站的码片序列：(–1 –1 –1 +1 +1 –1 +1 +1) </p>
<p>各用户使用<strong>相同频率</strong>载波，利用各自码片序列编码数据</p>
<p>编码信号 = (原始数据) × (码片序列)</p>
<ul>
<li><p>如发送比特 1（+1），则发送自己的 m bit 码片序列</p>
</li>
<li><p>如发送比特 0（-1），则发送该码片序列的m bit 码片序列的反码</p>
</li>
</ul>
<p>各用户码片序列相互<strong>正交（orthogonal）</strong></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171702149.png" alt="image-20220315143808203" style="zoom:80%;" /></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171702596.png" alt="image-20220315143842829"></p>
<h2 id="网络性能"><a href="#网络性能" class="headerlink" title="网络性能"></a>网络性能</h2><h3 id="速率和带宽"><a href="#速率和带宽" class="headerlink" title="速率和带宽"></a>速率和带宽</h3><p><strong>速率</strong>即<strong>数据率（data rate）</strong>或称<strong>数据传输速率</strong>或<strong>比特率（bit rate）</strong></p>
<ul>
<li>单位时间（秒）传输信息（比特）量</li>
<li>计算机网络中最重要的一个性能指标</li>
<li>单位：b/s（或bps）、kb/s、Mb/s、Gb/s</li>
<li>$k=10^3$ $M=10^6$ $G=10^9$ </li>
</ul>
<p>速率往往是指<strong>额定速率</strong>或<strong>标称速率</strong>，实际中一般达不到</p>
<p><strong>带宽（bandwidth）</strong>原本指信号具有的频带宽度，即最高频率与最低频率之差，单位是赫兹（Hz）</p>
<p>网络的“带宽”通常是数字信道所能传送的<strong>最高数据率</strong>，单位：b/s (bps)</p>
<p>常用单位：kb/s （$10^3$ b/s）、Mb/s（$10^6$ b/s）、Gb/s（$10^9$ b/s）、Tb/s（$10^{12}$ b/s）</p>
<h3 id="包转发率"><a href="#包转发率" class="headerlink" title="包转发率"></a>包转发率</h3><p><strong>包转发率（PPS）</strong>：全称是Packet Per Second（包/秒），表示交换机或</p>
<p>路由器等网络设备以包为单位的转发速率</p>
<p><strong>线速转发</strong>：交换机端口在满负载的情况下，对帧进行转发时能够达到该端口线路的最高速度</p>
<h3 id="延迟-时延"><a href="#延迟-时延" class="headerlink" title="延迟/时延"></a>延迟/时延</h3><p>发生情况：</p>
<p>分组在路由器缓存中排队</p>
<ul>
<li>分组到达速率超出输出链路容量时</li>
<li>分组排队，等待输出链路可用</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171702066.png" alt="image-20220315164944721"></p>
<p><strong>四种分组延迟：</strong></p>
<p><strong>传输时延(transmission delay)</strong>：数据从结点进入到传输媒体所需要的时间，传输时延又称为发送时延</p>
<p><strong>传播时延(propagation delay)</strong>：电磁波在信道中需要传播一定距离而花费的时间</p>
<p><strong>处理时延(processing delay)</strong>：主机或路由器在收到分组时，为处理分组（例如分析首部、提取数据、差错检验或查找路由）所花费的时间</p>
<p><strong>排队时延(queueing delay)</strong>：分组在路由器输入输出队列中排队等待处理所经历的时延 </p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171702024.png" alt="image-20220315165237933" style="zoom:80%;" /></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171702898.png" alt="image-20220315165257197"></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171703334.png" alt="image-20220315165455268"></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171703444.png" alt="image-20220315165935244"></p>
<h3 id="RTT"><a href="#RTT" class="headerlink" title="RTT"></a>RTT</h3><p><strong>往返时延</strong>RTT(Round-Trip Time)</p>
<p>从发送方发送数据开始，到发送方收到 来自接收方的确认，经历的总时间 </p>
<p>可用于判断网络的通断性、测试网络时 延、计算数据包丢失率等</p>
<h3 id="时延带宽积"><a href="#时延带宽积" class="headerlink" title="时延带宽积"></a>时延带宽积</h3><p>链路的<strong>时延带宽积</strong>又称为<strong>以比特为单位的链路长度</strong></p>
<p>时延带宽积 = 传播时延 x 带宽 = $d_{prop}\times R$ （bits）</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171703581.png" alt="image-20220315174553333"></p>
<h3 id="丢包率"><a href="#丢包率" class="headerlink" title="丢包率"></a>丢包率</h3><p>队列缓存容量有限</p>
<p>分组到达已满队列将被丢弃 (即丢包)</p>
<p>丢弃分组可能由前序结点或源重发（也可能不重发）</p>
<p>丢包率 = 丢包数 / 已发分组总数</p>
<h3 id="吞吐量-率"><a href="#吞吐量-率" class="headerlink" title="吞吐量/率"></a>吞吐量/率</h3><p>吞吐量：表示在发送端与接收端之间传送数据速率 (b/s)</p>
<ul>
<li><p>即时吞吐量：给定时刻的速率</p>
</li>
<li><p>平均吞吐量：一段时间的平均速率</p>
</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171703604.png" alt="image-20220315174835691"></p>
<h3 id="时延抖动"><a href="#时延抖动" class="headerlink" title="时延抖动"></a>时延抖动</h3><p>变化的时延称为抖动（Jitter） </p>
<p>时延抖动起源于网络中的队列或缓冲，抖动难以精确预测</p>
<p>在语音、视频多媒体业务中，抖动往往会严重影响用户的体验</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/image-20220621145714579.png" alt="image-20220621145714579"></p>
<h2 id="体系结构"><a href="#体系结构" class="headerlink" title="体系结构"></a>体系结构</h2><p>网络体系结构是从<strong>功能</strong>上描述计算机网络结构，即不关心物理的具体实现。</p>
<p>计算机网络体系结构简称网络体系结构（network architecture）是<strong>分层结构</strong></p>
<p>每层遵循某个/些<strong>网络协议</strong>完成本层功能</p>
<p>计算机网络体系结构是计算机网络的各层及其协议的集合</p>
<p>体系结构是一个计算机网络的功能层次及其关系的定义</p>
<p>体系结构是<strong>抽象</strong>的</p>
<hr>
<p><strong>分层结构的优点：</strong></p>
<p>结构清晰，有利于识别复杂系统的部件及其关系</p>
<ul>
<li>分层的参考模型（reference model ）</li>
</ul>
<p>模块化的分层易于<strong>系统更新、维护</strong></p>
<ul>
<li>任何一层服务实现的改变对于系统其它层都是透明的</li>
</ul>
<p>有利于标准化</p>
<p>不利之处：分层较多会导致效率变低，不同层之间存在信息冗余</p>
<font color=#ff000>注：透明在这里表示不可见的，类似于玻璃透明，所以看不见，很奇怪但就是这样</font> 

<hr>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171704210.png" alt="image-20220315191237205"></p>
<p><strong>实体（entity）</strong>表示任何可发送或接收信息的硬件或软件进程</p>
<p>协议是控制<strong>两个对等实体（即同一层）</strong>进行通信的规则的集合，<strong>协议是“水平的”</strong>。</p>
<p>任一层实体需要<strong>使用下层服务</strong>，<strong>遵循本层协议</strong>，实现本层功能，<strong>向上层提供服务</strong>，<strong>服务是“垂直的”</strong>。</p>
<p>同系统的相邻层实体间通过<strong>接口</strong>进行交互，通过服务访问点 <strong>SAP（Service Access Point）</strong>，交换<strong>原语</strong>，指定请求的特定服务。</p>
<h3 id="OSI参考模型（七层）"><a href="#OSI参考模型（七层）" class="headerlink" title="OSI参考模型（七层）"></a>OSI参考模型（七层）</h3><p>开放系统互连 (OSI)参考模型是由国际标准化组织 (ISO) 于1984年提出的分层网络体系结构模型。</p>
<p>目的是支持<strong>异构网络系统</strong>的互联互通，是异构网络系统互连的<strong>国际标准</strong></p>
<p>理解网络通信的最佳学习工具（理论模型）：理论成功，市场失败</p>
<p>7层（功能）,每层完成特定的网络功能</p>
<ul>
<li><strong>应用层（Application）</strong></li>
<li><strong>表示层（Presentation）</strong></li>
<li><strong>会话层（Session）</strong></li>
<li><strong>传输层（Transport）</strong></li>
<li><strong>网络层（Network）</strong></li>
<li><strong>数据链路层（Data link）</strong></li>
<li><strong>物理层（Physical）</strong></li>
</ul>
<hr>
<p><strong>通信过程</strong>：主机要实现7层的功能，中间系统要实现底三层的功能，上四层称为<strong>端-端层</strong></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171704633.png" alt="image-20220315193024712"></p>
<hr>
<p><strong>数据封装：</strong></p>
<p><strong>PDU：协议数据单元</strong></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171704613.png" alt="image-20220315193228707"></p>
<p>数据封装的原因：</p>
<ul>
<li>增加控制信息，构造协议数据单元（PDU）</li>
</ul>
<p>控制信息主要包括</p>
<ul>
<li><strong>地址（Address）：</strong>标识发送端/接收端</li>
<li><strong>差错检测编码（Error-detecting code）：</strong>用于差错检测或纠正</li>
<li><strong>协议控制（Protocol control）：</strong>实现协议功能的附加信息，如：优先级（priority）、服务质量（QoS）、安全控制等</li>
</ul>
<h3 id="物理层功能"><a href="#物理层功能" class="headerlink" title="物理层功能"></a>物理层功能</h3><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171704180.png" alt="image-20220315200523222"></p>
<ul>
<li><p><strong>接口特性</strong></p>
<ul>
<li>机械特性、电气特性、功能特性、规程特性</li>
</ul>
</li>
<li><p><strong>比特编码</strong></p>
</li>
<li><strong>数据率</strong></li>
<li><strong>比特同步</strong><ul>
<li>时钟同步</li>
</ul>
</li>
<li><strong>传输模式</strong><ul>
<li>半工（Simplex）</li>
<li>半双工（half-duplex）</li>
<li>全双工（full-duplex）</li>
</ul>
</li>
</ul>
<h3 id="数据链路层功能"><a href="#数据链路层功能" class="headerlink" title="数据链路层功能"></a>数据链路层功能</h3><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171704859.png" alt="image-20220315200905889"></p>
<ul>
<li><p>负责<strong>结点-结点（node-to-node）</strong>数据传输</p>
</li>
<li><p><strong>组帧（Framing）</strong></p>
</li>
<li><p><strong>物理寻址（Physical addressing）</strong></p>
<ul>
<li><p>在帧头中增加发送端和/或接收端的物理地址标识数据帧的发送端和/或接收端</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171704174.png" alt="image-20220315201039162"></p>
</li>
</ul>
</li>
<li><p><strong>流量控制（Flow control）</strong>：避免淹没客户端</p>
</li>
<li><p><strong>差错控制（Error control）：</strong>检测并重传损坏或丢失帧，并避免重复帧</p>
</li>
<li><p><strong>访问(接入)控制（Access control）</strong>：在任一给定时刻决定哪个设备拥有链路（物理介质）控制使用权</p>
</li>
</ul>
<h3 id="网络层功能"><a href="#网络层功能" class="headerlink" title="网络层功能"></a>网络层功能</h3><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171705791.png" alt="image-20220315201250020"></p>
<ul>
<li><p>负责<strong>源主机到目的主机</strong>数据分组（packet）交付，该过程可能穿越多个网络</p>
</li>
<li><p><strong>逻辑寻址（Logical addressing）</strong></p>
<ul>
<li><strong>全局唯一</strong>逻辑地址，确保数据分组被送达目的主机，如IP地址</li>
</ul>
</li>
<li><p><strong>路由（Routing）</strong></p>
<ul>
<li>路由器(或网关)互连网络，并路由分组至最终目的主机</li>
<li>路径选择</li>
</ul>
</li>
<li><p><strong>分组转发</strong></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171705978.png" alt="image-20220315201509111"></p>
</li>
</ul>
<h3 id="传输层功能"><a href="#传输层功能" class="headerlink" title="传输层功能"></a>传输层功能</h3><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171705390.png" alt="image-20220316112518085"></p>
<ul>
<li><p>负责<strong>源-目的（端-端）（进程间） 完整报文</strong>传输</p>
</li>
<li><p><strong>分段与重组</strong></p>
</li>
<li><p><strong>SAP寻址</strong>：确保将完整报文提交给正确进程，如端口号</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171705825.png" alt="image-20220316112638582"></p>
</li>
<li><p>连接控制</p>
</li>
<li><p>流量控制</p>
</li>
<li><p>差错控制</p>
</li>
</ul>
<h3 id="会话层功能"><a href="#会话层功能" class="headerlink" title="会话层功能"></a>会话层功能</h3><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171705172.png" alt="image-20220316112729017"></p>
<ul>
<li><strong>对话控制（dialog controlling）</strong>：建立和维护</li>
<li><strong>同步（synchronization）</strong>：在数据流中插入“同步点”</li>
</ul>
<h3 id="表示层功能"><a href="#表示层功能" class="headerlink" title="表示层功能"></a>表示层功能</h3><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171705794.png" alt="image-20220316112937068"></p>
<p>处理两个系统间交换信息的<strong>语法与语义（syntax and semantics ）</strong>问题</p>
<ul>
<li><strong>数据表示转化</strong>：转换为主机独立的编码</li>
<li><strong>加密/解密</strong></li>
<li><strong>压缩/解压缩</strong></li>
</ul>
<h3 id="应用层功能"><a href="#应用层功能" class="headerlink" title="应用层功能"></a>应用层功能</h3><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171705058.png" alt="image-20220316113102378"></p>
<ul>
<li>支持用户通过用户代理（如浏览器）或网络接口使用网络（服务）</li>
<li>典型应用层服务：<ul>
<li>文件传输（FTP）</li>
<li>电子邮件（SMTP）</li>
<li>Web（HTTP）</li>
</ul>
</li>
</ul>
<h3 id="TCP-IP参考模型（四层）"><a href="#TCP-IP参考模型（四层）" class="headerlink" title="TCP/IP参考模型（四层）"></a>TCP/IP参考模型（四层）</h3><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171705055.png" alt="image-20220316113349098"></p>
<p><strong>Everything over IP：IP可为各式各样的应用程序提供服务</strong></p>
<p><strong>IP over Everything：IP可应用到各式各样的网络上</strong></p>
<h3 id="5层参考模型"><a href="#5层参考模型" class="headerlink" title="5层参考模型"></a>5层参考模型</h3><p>综合 OSI 和 TCP/IP 的优点</p>
<ul>
<li><strong>应用层</strong>：支持各种网络应用<ul>
<li>FTP, SMTP, HTTP</li>
</ul>
</li>
<li><strong>传输层：</strong>进程-进程的数据传输<ul>
<li>TCP, UDP</li>
</ul>
</li>
<li><strong>网络层：</strong> 源主机到目的主机的数据分组路由与转发<ul>
<li>IP协议、路由协议等</li>
</ul>
</li>
<li><strong>链路层</strong>： 相邻网络元素（主机、交换机、路由器等）的数据传输<ul>
<li>以太网（Ethernet）、802.11 (WiFi)、PPP</li>
</ul>
</li>
<li><strong>物理层：</strong>比特传输</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171706205.png" alt="image-20220316113930106"></p>
<h2 id="网络应用"><a href="#网络应用" class="headerlink" title="网络应用"></a>网络应用</h2><h3 id="体系结构-1"><a href="#体系结构-1" class="headerlink" title="体系结构"></a>体系结构</h3><ul>
<li><strong>客户机/服务器结构（Client-Server，C/S）</strong></li>
<li><strong>点对点结构（Peer-to-Peer，P2P）</strong></li>
<li><strong>混合结构（Hybrid）</strong></li>
</ul>
<h4 id="C-S结构"><a href="#C-S结构" class="headerlink" title="C/S结构"></a>C/S结构</h4><p>服务器</p>
<ul>
<li>7*24小时提供服务</li>
<li>永久性访问地址/域名</li>
<li>利用大量服务器实现可<strong>扩展性</strong>（例如并发控制，大批量的请求处理）</li>
</ul>
<p>客户机</p>
<ul>
<li>与服务器通信，使用服务器提供的服务</li>
<li>间歇性接入网络</li>
<li>可能使用动态IP地址</li>
<li>不会与其他客户机直接通信</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171706934.png" alt="image-20220316143129684"></p>
<h4 id="P2P结构"><a href="#P2P结构" class="headerlink" title="P2P结构"></a>P2P结构</h4><ul>
<li>没有永远在线的服务器</li>
<li>任意端系统/节点之间可以直接通讯</li>
<li>节点间歇性接入网络</li>
<li>节点可能改变IP地址</li>
<li>优点：高度可伸缩</li>
<li>缺点：难于管理</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171706071.png" alt="image-20220316143252371" style="zoom:80%;" /></p>
<h4 id="混合结构"><a href="#混合结构" class="headerlink" title="混合结构"></a>混合结构</h4><p>将C/S结构和P2P结构混合使用，成功示例：Napster</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171706243.png" alt="image-20220316143528551"></p>
<h3 id="进程通信"><a href="#进程通信" class="headerlink" title="进程通信"></a>进程通信</h3><p>进程间通信是网络应用的基础</p>
<p><strong>进程</strong>：主机上运行的程序</p>
<p>同一主机上运行的进程之间的通信？</p>
<ul>
<li>进程间通信机制（操作系统提供）</li>
</ul>
<p>不同主机上运行的进程间如何通信？</p>
<ul>
<li>消息交换</li>
</ul>
<p><strong>客户机进程</strong>: 发起通信的进程</p>
<p><strong>服务器进程</strong>: 等待通信请求的进程</p>
<h4 id="套接字"><a href="#套接字" class="headerlink" title="套接字"></a>套接字</h4><p><strong>套接字：Socket</strong>（操作系统封装好的API）</p>
<p>进程间通信利用socket发送/接收消息实现</p>
<p>传输基础设施向进程提供API</p>
<ul>
<li>传输协议的选择</li>
<li>参数的设置</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171706888.png" alt="image-20220316145350232" style="zoom:80%;" /></p>
<h4 id="寻址进程"><a href="#寻址进程" class="headerlink" title="寻址进程"></a>寻址进程</h4><p>不同主机上的进程间通信，那么每个进程必须拥有<strong>标识符</strong></p>
<p>寻址主机？——<strong>IP地址</strong>，但一个主机可能同时有多个进程需要通信，所以还要端口号</p>
<p>进程标识符：<strong>IP地址+端口号</strong>，如 192.168.0.100:499225</p>
<p><strong>端口号/Port number</strong></p>
<ul>
<li>为主机上每个需要通信的进程分配一个端口号</li>
<li>一些约定俗成的端口：<strong>HTTP Server:80</strong>，<strong>Mail Server:25</strong></li>
</ul>
<h4 id="应用层协议"><a href="#应用层协议" class="headerlink" title="应用层协议"></a>应用层协议</h4><p>网络应用需遵循应用层协议（但要遵循的不只是应用层协议）</p>
<p>公开协议</p>
<ul>
<li>由<strong>RFC（Request For Comments）</strong>定义（一般要看一个协议的详细内容可以上RFC官网查看）<ul>
<li>允许互操作</li>
<li>HTTP, SMTP, ……</li>
</ul>
</li>
<li>私有协议<ul>
<li>多数P2P文件共享应用</li>
</ul>
</li>
</ul>
<p><strong>协议内容</strong>：</p>
<ul>
<li>消息类型（type）<ul>
<li>请求消息</li>
<li>响应消息</li>
</ul>
</li>
<li>消息的语法（syntax）/ 格式<ul>
<li>消息包含哪些字段（field）</li>
<li>每个字段如何描述</li>
</ul>
</li>
<li>字段的语义（semantics）<ul>
<li>字段中信息的含义</li>
</ul>
</li>
<li>规则（rules）<ul>
<li>进程何时发送/响应消息</li>
<li>进程如何发送/响应消息</li>
</ul>
</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171706074.png" alt="image-20220316150321771" style="zoom:80%;" /></p>
<h4 id="对传输服务的需求"><a href="#对传输服务的需求" class="headerlink" title="对传输服务的需求"></a>对传输服务的需求</h4><ul>
<li><strong>数据丢失（data loss）/ 可靠性（reliability）</strong><ul>
<li>某些网络应用能够容忍一定的数据丢失：网络电话</li>
<li>某些网络应用要求100%可靠的数据传输：文件传输，telnet</li>
</ul>
</li>
<li><strong>时间（timing）/ 延迟（delay）</strong><ul>
<li>有些应用只有在延迟足够低时才“有效”：网络电话/网络游戏</li>
</ul>
</li>
<li><strong>带宽（bandwidth）</strong><ul>
<li>某些应用只有在带宽达到最低要求时才“有效”：网络视频</li>
<li>某些应用能够适应任何带宽——弹性应用：email</li>
</ul>
</li>
</ul>
<p><strong>Internet提供的传输服务</strong></p>
<p><strong>1、TCP服务</strong></p>
<ul>
<li><strong>面向连接</strong>：客户机/服务器进程间需要建立连接</li>
<li><strong>可靠的传输</strong></li>
<li><strong>流量控制</strong>：发送方不会发送速度过快，超过接收方的处理能力</li>
<li><strong>拥塞控制</strong>：当网络负载过重时能够限制发送方的发送速度</li>
<li><font color=#ff0000>不提供时间/延迟保障</font></li>
<li><font color=#ff0000>不提供最小带宽保障</font>

</li>
</ul>
<p><strong>2、UDP服务</strong></p>
<ul>
<li>无连接</li>
<li>不可靠的数据传输</li>
<li>不提供：<ul>
<li>可靠性保障</li>
<li>流量控制</li>
<li>拥塞控制</li>
<li>延迟保障</li>
<li>带宽保障</li>
</ul>
</li>
</ul>
<h3 id="Web应用"><a href="#Web应用" class="headerlink" title="Web应用"></a>Web应用</h3><p><strong>万维网（World Wide Web）：www</strong></p>
<p><strong>Web构成</strong>：1）网页  2）网页互相链接</p>
<p><strong>网页（Web Page）包含多个对象（objects）</strong></p>
<ul>
<li>对象：HTML文件、JPEG图片、视频文件、动态脚本等</li>
<li>基本HTML文件：包含对其它对象引用的链接</li>
</ul>
<p><strong>对象的寻址（addressing）</strong></p>
<ul>
<li><strong>URL（Uniform Resoure Locator）：统一资源定位器</strong> RFC1738</li>
<li>url格式：<strong>Scheme(协议)://host:port(主机IP或域名)/path</strong> </li>
</ul>
<h4 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h4><p><strong>超文本传输协议HTTP：HyperText Transfer Protocol</strong></p>
<ul>
<li>1.0版本：RFC 1945</li>
<li>2.0版本：RFC 2068</li>
</ul>
<p><strong>C/S结构</strong></p>
<ul>
<li>客户—Browser：请求、接收、展示Web对象</li>
<li>服务器—Web Server：响应客户的请求，发送对象</li>
</ul>
<p><strong>Web遵循HTTP协议——HTTP协议使用TCP传输服务</strong></p>
<ul>
<li>服务器在80端口等待客户的请求</li>
<li>浏览器发起到服务器的TCP连接(创建套接字Socket)</li>
<li>服务器接受来自浏览器的TCP连接</li>
<li>浏览器(HTTP客户端)与Web服务器(HTTP服务器)交换HTTP消息</li>
<li>关闭TCP连接</li>
</ul>
<p>HTTP是<strong>无状态（stateless）</strong>：服务器不维护任何有关客户端过去所发请求的信息（引入了Cookie技术）</p>
<p>有状态的协议更复杂：需维护状态(历史信息)。如果客户或服务器失效，会产生状态的不一致，解决这种不一致代价高。</p>
<h4 id="HTTP连接"><a href="#HTTP连接" class="headerlink" title="HTTP连接"></a>HTTP连接</h4><p><strong>HTTP连接的两种类型</strong></p>
<ul>
<li><strong>非持久性连接（Nonpersistent HTTP）</strong></li>
<li><strong>持久性连接（Persistent HTTP）</strong></li>
</ul>
<p>1、<strong>非持久性连接（Nonpersistent HTTP）</strong></p>
<ul>
<li>每个TCP连接最多允许传输一个对象</li>
<li>HTTP 1.0版本使用非持久性连接</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171707283.png" alt="image-20220316163438722"></p>
<p>响应时间分析：</p>
<p><strong>RTT（Round Trip Time）：</strong>从客户端发送一个很小的数据包到服务器并返回所经历的时间</p>
<p>响应时间（Response time）：</p>
<ul>
<li>发起、建立TCP连接：1个RTT</li>
<li>发送HTTP请求消息到HTTP响应消息的前几个字节到达：1个RTT</li>
<li>响应消息中所含的文件/对象传输时间</li>
<li>Total=2RTT +文件发送时间</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171707966.png" alt="image-20220316163746401" style="zoom:80%;" /></p>
<p>非持久性连接的问题：</p>
<ul>
<li>每个对象需要2个RTT</li>
<li>操作系统需要为每个TCP连接开销资源（overhead）</li>
<li>浏览器会打开多个并行的TCP连接以获取网页所需对象，增大了服务器的负担</li>
</ul>
<p>2、<strong>持久性连接（Persistent HTTP）</strong></p>
<ul>
<li>每个TCP连接允许传输多个对象</li>
<li>HTTP 1.1版本默认使用持久性连接</li>
</ul>
<p>持久性连接：</p>
<ul>
<li>发送响应后，服务器保持TCP连接的打开</li>
<li>后续的HTTP消息可以通过这个连接发送</li>
</ul>
<p>分为：无流水（pipelining）的持久性连接、带有流水机制的持久性连接</p>
<p><strong>无流水（pipelining）的持久性连接</strong></p>
<ul>
<li>客户端只有收到前一个响应后才发送新的请求</li>
<li>每个被引用的对象耗时1个RTT</li>
</ul>
<p><strong>带有流水机制的持久性连接：</strong></p>
<ul>
<li>HTTP 1.1的默认选项</li>
<li>客户端只要遇到一个引用对象就尽快发出请求</li>
<li>理想情况下，收到所有的引用对象只需耗时约1个RTT</li>
</ul>
<h4 id="HTTP的消息格式"><a href="#HTTP的消息格式" class="headerlink" title="HTTP的消息格式"></a>HTTP的消息格式</h4><p><strong>HTTP协议有两类消息</strong>：</p>
<ul>
<li>请求消息（requests）：ASCII 人直接可读</li>
<li>响应消息（response）</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171707451.png" alt="image-20220316170307225"></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171707337.png" alt="image-20220316170942413"></p>
<p><strong>上传输入的方法：</strong></p>
<ul>
<li><p><strong>POST方法</strong>：在请求消息的消息体(entity body)中上传客户端的输入</p>
</li>
<li><p><strong>URL方法或GET方法</strong>：输入信息通过request行的URL字段上传</p>
</li>
</ul>
<p><strong>方法的类型</strong>：</p>
<p>HTTP/1.0：<strong>GET，POST，HEAD（请Server不要将所请求的对象放入响应消息中）</strong></p>
<p>HTTP/1.1：<strong>GET，POST，HEAD，PUT（将消息体中的文件上传到URL字段所指定的路径），DELETE（删除URL字段所指定的文件）</strong></p>
<h4 id="响应状态代码"><a href="#响应状态代码" class="headerlink" title="响应状态代码"></a>响应状态代码</h4><p>200 OK</p>
<p>301 Moved Permanently</p>
<p>400 Bad Request</p>
<p>404 Not Found</p>
<p>505 HTTP Version Not Supported</p>
<h4 id="Cookie技术"><a href="#Cookie技术" class="headerlink" title="Cookie技术"></a>Cookie技术</h4><p>HTTP协议无状态，很多应用需要服务器掌握客户端的状态，如网上购物。</p>
<p><strong>Cookie技术</strong> RFC6265</p>
<p>某些网站为了辨别用户身份、进行session跟踪而储存在用户本地终端上的数据（通常经过加密）。</p>
<p><strong>Cookie的组件</strong>：</p>
<ul>
<li>HTTP响应消息的cookie头部行</li>
<li>HTTP请求消息的cookie头部行</li>
<li>保存在客户端主机上的cookie文件，由浏览器管理</li>
<li>Web服务器端的后台数据库</li>
</ul>
<p><strong>Cookie原理：</strong></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171707155.png" alt="image-20220316174649586"></p>
<p><strong>Cookie作用：</strong>身份认证、购物车</p>
<p>缺点：会导致<strong>隐私问题</strong></p>
<h4 id="Web缓存-代理服务器技术"><a href="#Web缓存-代理服务器技术" class="headerlink" title="Web缓存/代理服务器技术"></a>Web缓存/代理服务器技术</h4><p>功能：在<strong>不访问服务器</strong>的前提下满足客户端的HTTP请求</p>
<p>作用：</p>
<ul>
<li>缩短客户请求的响应时间</li>
<li>减少机构/组织的流量</li>
<li>在大范围内(Internet)实现有效的内容分发</li>
</ul>
<p>Web缓存/代理服务器：一般由ISP(Internet服务提供商)架设</p>
<ul>
<li>用户设定浏览器通过缓存进行Web访问</li>
<li>浏览器向缓存/代理服务器发送所有的HTTP请求<ul>
<li>如果所请求对象在缓存中，缓存返回对象</li>
<li>否则，缓存服务器向原始服务器发送HTTP请求，获取对象，然后返回给客户端并保存该对象</li>
</ul>
</li>
<li><strong>缓存既充当客户端，也充当服务器</strong></li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171707971.png" alt="image-20220316190301600" style="zoom:80%;" /></p>
<p><strong>示例：</strong></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171707370.png" alt="image-20220316190502668"></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171707509.png" alt="image-20220316190522231"></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708430.png" alt="image-20220316190536437"></p>
<p>Web缓存/代理服务器技术需要解决的问题——<strong>如果原服务器的内容进行了更新modified，怎么保障缓存/代理服务器中的内容也是最新版本</strong>：<strong>条件性GET方法</strong></p>
<ul>
<li>目标：如果缓存有最新的版本，则不需要发送请求对象</li>
<li>缓存：在HTTP请求消息中声明所持有版本的日期 <code>If-modified-since: &lt;date&gt;</code> </li>
<li>服务器：如果缓存的版本是最新的，则响应消息中不包含对象 <code>HTTP/1.0 304 Not Modified</code> </li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708478.png" alt="image-20220316190954469" style="zoom:80%;" /></p>
<h3 id="Email应用"><a href="#Email应用" class="headerlink" title="Email应用"></a>Email应用</h3><p>Email应用的构成组件</p>
<ul>
<li>邮件客户端(user agent)</li>
<li>邮件服务器</li>
<li>SMTP协议(Simple Mail Transfer Protocol)</li>
</ul>
<p>邮件客户端：</p>
<ul>
<li>读、写Email消息</li>
<li>与服务器交互，收、发Email消息</li>
<li>Outlook, Foxmail, Thunderbird</li>
<li>Web客户端</li>
</ul>
<p>邮件服务器(Mail Server)</p>
<ul>
<li>邮箱：存储发给该用户的Email</li>
<li>消息队列(message queue)：存储等待发送的Email</li>
</ul>
<p>SMTP协议：邮件服务器之间传递消息所使用的协议</p>
<ul>
<li>客户端：发送消息的服务器</li>
<li>服务器：接收消息的服务器</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708724.png" alt="image-20220317111304481" style="zoom:80%;" /></p>
<h4 id="SMTP协议"><a href="#SMTP协议" class="headerlink" title="SMTP协议"></a>SMTP协议</h4><p><strong>RFC 2821</strong></p>
<ul>
<li>使用TCP进行email消息的可靠传输，使用持久性连接</li>
<li>端口25</li>
<li>传输过程的三个阶段<ul>
<li>握手</li>
<li>消息的传输</li>
<li>关闭</li>
</ul>
</li>
<li>命令/响应交互模式<ul>
<li>命令(command): ASCII文本</li>
<li>响应(response): 状态代码和语句</li>
</ul>
</li>
<li>Email消息只能包含7位ASCII码（所以邮件附件发送是用来什么技术呢？多媒体扩展）</li>
<li>SMTP服务器利用CRLF.CRLF确定消息的结束</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 交互示例 s-server c-client</span></span><br><span class="line">S: 220 hamburger.edu </span><br><span class="line">C: HELO crepes.fr </span><br><span class="line">S: 250 Hello crepes.fr, pleased to meet you </span><br><span class="line">C: MAIL FROM: &lt;alice@crepes.fr&gt; </span><br><span class="line">S: 250 alice@crepes.fr... Sender ok </span><br><span class="line">C: RCPT TO: &lt;bob@hamburger.edu&gt; </span><br><span class="line">S: 250 bob@hamburger.edu ... Recipient ok </span><br><span class="line">C: DATA </span><br><span class="line">S: 354 Enter mail, end with <span class="string">&quot;.&quot;</span> on a line by itself </span><br><span class="line">C: Do you like ketchup? </span><br><span class="line">C: How about pickles? </span><br><span class="line">C: . </span><br><span class="line">S: 250 Message accepted <span class="keyword">for</span> delivery </span><br><span class="line">C: QUIT </span><br><span class="line">S: 221 hamburger.edu closing connection</span><br></pre></td></tr></table></figure>
<p><strong>使用telnet与SMTP交互</strong></p>
<ul>
<li><code>telnet servername 25</code></li>
<li>命令：是有顺序的<ul>
<li><code>HELO</code></li>
<li><code>MAIL FROM</code></li>
<li><code>RCPT TO</code></li>
<li><code>DATA</code></li>
<li><code>QUIT</code></li>
</ul>
</li>
</ul>
<h4 id="与HTTP对比"><a href="#与HTTP对比" class="headerlink" title="与HTTP对比"></a>与HTTP对比</h4><ul>
<li>HTTP: 拉式(pull)</li>
<li>SMTP: 退式(push)</li>
<li>都使用命令/响应交互模式</li>
<li>命令和状态代码都是ASCII码</li>
<li>HTTP: 每个对象封装在独立的响应消息中</li>
<li>SMTP: 多个对象在由多个部分构成的消息中发送</li>
</ul>
<h4 id="Email消息格式"><a href="#Email消息格式" class="headerlink" title="Email消息格式"></a>Email消息格式</h4><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708824.png" alt="image-20220317114612226"></p>
<h4 id="多媒体扩展"><a href="#多媒体扩展" class="headerlink" title="多媒体扩展"></a>多媒体扩展</h4><p><strong>MIME</strong>：多媒体邮件扩展 RFC 2045, 2056</p>
<ul>
<li>通过在邮件头部增加额外的行以声明MIME的内容类型</li>
<li>实现除ASCII文本之外，图片音频等文件的发送（通过base64）</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708068.png" alt="image-20220317114733897"></p>
<h4 id="邮件访问协议"><a href="#邮件访问协议" class="headerlink" title="邮件访问协议"></a>邮件访问协议</h4><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708805.png" alt="image-20220317115008777"></p>
<p>邮件访问协议：从服务器获取邮件</p>
<ul>
<li><strong>POP</strong>：Post Office Protocol [RFC 1939]<ul>
<li>认证/授权(客户端——服务器)和下载</li>
</ul>
</li>
<li><strong>IMAP</strong>：Internet Mail Access Protocol [RFC 1730]<ul>
<li>更多功能</li>
<li>更加复杂</li>
<li>能够操纵服务器上存储的消息</li>
</ul>
</li>
<li><strong>HTTP</strong>：163, QQ Mail等</li>
</ul>
<h4 id="POP协议"><a href="#POP协议" class="headerlink" title="POP协议"></a>POP协议</h4><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708431.png" alt="image-20220317115149167"></p>
<p>“下载并删除”模式</p>
<ul>
<li>用户如果换了客户端软件，无法重读该邮件</li>
</ul>
<p>“下载并保持”模式：不同客户端都可以保留消息的拷贝</p>
<p>POP3是无状态的</p>
<h4 id="IMAP协议"><a href="#IMAP协议" class="headerlink" title="IMAP协议"></a>IMAP协议</h4><p>所有消息统一保存在一个地方：服务器</p>
<p>允许用户利用文件夹组织消息</p>
<p>IMAP支持跨会话(Session)的用户状态:</p>
<ul>
<li>文件夹的名字</li>
<li>文件夹与消息ID之间的映射等</li>
</ul>
<h3 id="DNS应用"><a href="#DNS应用" class="headerlink" title="DNS应用"></a>DNS应用</h3><p><strong>DNS：Domain Name System</strong></p>
<p>Internet上主机/路由器的识别</p>
<ul>
<li>IP地址 192.168.0.1</li>
<li>域名：www.hit.edu.cn</li>
<li>IP和域名之间存在映射关系，域名的优点是容易记</li>
</ul>
<p>域名解析系统DNS：</p>
<ul>
<li><strong>多层</strong>命名服务器构成的<strong>分布式数据库</strong></li>
<li>应用层协议：完成名字的解析<ul>
<li>Internet核心功能，用应用层协议实现</li>
<li>网络边界复杂</li>
</ul>
</li>
</ul>
<p>DNS服务：</p>
<ul>
<li>域名向IP地址的翻译</li>
<li>主机别名</li>
<li>邮件服务器别名</li>
<li>负载均衡：Web服务器</li>
</ul>
<p>为什么不使用集中式的DNS？</p>
<ul>
<li>单点失败问题</li>
<li>流量问题</li>
<li>距离问题</li>
<li>维护性问题</li>
</ul>
<h4 id="DNS结构"><a href="#DNS结构" class="headerlink" title="DNS结构"></a>DNS结构</h4><p>分布式层次式数据库</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708129.png" alt="image-20220317141357368"></p>
<p>示例：客户端想要查询www.amazon.com的IP</p>
<ul>
<li>客户端查询根服务器，找到com域名解析服务器</li>
<li>客户端查询com域名解析服务器，找到amazon.com域名解析服务器</li>
<li>客户端查询amazon.com域名解析服务器，获得www.amazon.com的IP地址</li>
</ul>
<h4 id="域名服务器类型"><a href="#域名服务器类型" class="headerlink" title="域名服务器类型"></a>域名服务器类型</h4><p><strong>DNS根域名服务器</strong>：</p>
<ul>
<li>本地域名解析服务器无法解析域名时，访问根域名服务器</li>
<li>根域名服务器<ul>
<li>如果不知道映射，访问权威域名服务器</li>
<li>获得映射</li>
<li>向本地域名服务器返回映射</li>
</ul>
</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171708879.png" alt="image-20220317141629210"></p>
<p><strong>顶级域名服务器</strong>（TLD, top-level domain）：负责com, org, net,edu等顶级域名和国家顶级域名，例如cn, uk, fr等</p>
<ul>
<li>Network Solutions维护com顶级域名服务器</li>
<li>Educause维护edu顶级域名服务器 </li>
</ul>
<p><strong>权威(Authoritative)域名服务器</strong>：组织的域名解析服务器，提供组织内部服务器的解析服务</p>
<ul>
<li>组织负责维护</li>
<li>服务提供商负责维护</li>
</ul>
<p><strong>本地域名解析服务器：</strong></p>
<ul>
<li>不严格属于层级体系</li>
<li>每个ISP有一个本地域名服务器，默认域名解析服务器</li>
<li>当主机进行DNS查询时，查询被发送到本地域名服务器，作为代理(proxy)，将查询转发给（层级式）域名解析服务器系统</li>
</ul>
<h4 id="DNS查询"><a href="#DNS查询" class="headerlink" title="DNS查询"></a>DNS查询</h4><p><strong>DNS查询示例</strong>：Cis.poly.edu 的主机想获得 gaia.cs.umass.edu的IP地址</p>
<p>1、<strong>迭代查询</strong></p>
<ul>
<li>被查询服务器返回域名解析服务器的名字</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171709774.png" alt="image-20220317142150214" style="zoom:70%;" /></p>
<p>2、<strong>递归查询</strong></p>
<ul>
<li>将域名解析的任务交给所联系的服务器</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171709145.png" alt="image-20220317142243953" style="zoom:67%;" /></p>
<h4 id="DNS缓存"><a href="#DNS缓存" class="headerlink" title="DNS缓存"></a>DNS缓存</h4><p><strong>DNS记录缓存和更新</strong>：</p>
<p>只要域名解析服务器获得域名—IP映射，即<strong>缓存</strong>这一映射</p>
<ul>
<li>一段时间过后，缓存条目失效（删除）</li>
<li>本地域名服务器一般会缓存顶级域名服务器的映射，因此根域名服务器不经常被访问</li>
</ul>
<p><strong>记录的更新/通知机制</strong>：</p>
<ul>
<li>RFC 2136</li>
<li>Dynamic Updates in the Domain Name System (DNS UPDATE)</li>
</ul>
<h4 id="DNS记录格式"><a href="#DNS记录格式" class="headerlink" title="DNS记录格式"></a>DNS记录格式</h4><p>资源记录（RR, resource records），<code>RR format : (name,value,type,ttl)</code></p>
<ul>
<li>Type=A<ul>
<li>Name: 主机域名</li>
<li>Value: IP地址</li>
</ul>
</li>
<li>Type=NS<ul>
<li>Name: 域(edu.cn)</li>
<li>Value: 该域权威域名解析服务器的主机域名</li>
</ul>
</li>
<li>Type=CNAME<ul>
<li>Name: 某一真实域名的别名www.ibm.com——servereast.backup2.ibm.com</li>
<li>Value: 真实域名</li>
</ul>
</li>
<li>Type=MX<ul>
<li>Value是与name相对应的邮件服务器</li>
</ul>
</li>
</ul>
<h4 id="DNS消息格式"><a href="#DNS消息格式" class="headerlink" title="DNS消息格式"></a>DNS消息格式</h4><p>DNS协议：</p>
<ul>
<li>查询(query)和回复(reply消息)</li>
<li>消息格式相同</li>
</ul>
<p>消息头部</p>
<ul>
<li>Identification: 16位查询编号，回复使用相同的编号</li>
<li>flags<ul>
<li>查询或回复</li>
<li>期望递归</li>
<li>递归可用</li>
<li>权威回答</li>
</ul>
</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171709408.png" alt="image-20220317144634247"></p>
<h4 id="域名注册"><a href="#域名注册" class="headerlink" title="域名注册"></a>域名注册</h4><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171709474.png" alt="image-20220317144912956"></p>
<h3 id="P2P应用"><a href="#P2P应用" class="headerlink" title="P2P应用"></a>P2P应用</h3><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171709160.png" alt="image-20220317153122261"></p>
<p>客户机/服务器：</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171709258.png" alt="image-20220317153223719"></p>
<p>P2P：</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171709922.png" alt="image-20220317153301032"></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171709014.png" alt="image-20220317153337235"></p>
<h4 id="BitTorrent-BT"><a href="#BitTorrent-BT" class="headerlink" title="BitTorrent(BT)"></a>BitTorrent(BT)</h4><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171710037.png" alt="image-20220317153426544"></p>
<ul>
<li>文件划分为256KB的chunk</li>
<li>节点加入torrent<ul>
<li>没有chunk，但是会逐渐积累</li>
<li>向tracker注册以获得节点清单，与某些节点（“邻居”）建立连接</li>
</ul>
</li>
<li>下载的同时，节点需要向其他节点上传chunk</li>
<li>节点可能加入或离开</li>
<li>一旦节点获得完整的文件，它可能（自私地）离开或（无私地）留下</li>
<li><strong>获取chunk</strong><ul>
<li>给定任一时刻，不同的节点持有文件的不同chunk集合</li>
<li>节点(Alice)定期查询每个邻居所持有的chunk列表</li>
<li>节点发送请求，请求获取缺失的chunk——<strong>稀缺优先</strong></li>
</ul>
</li>
<li><strong>发送chunk</strong>：tit-for-tat<ul>
<li>Alice向4个邻居发送chunk：正在向其发送Chunk，速率最快的4个<ul>
<li>每10秒重新评估top 4</li>
</ul>
</li>
<li>每30秒随机选择一个其他节点，向其发送chunk<ul>
<li>新选择节点可能加入top 4</li>
<li>“optimistically unchoke”</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>BT的危害</strong>：</p>
<ul>
<li>传播盗版</li>
<li>损害硬盘</li>
<li>传播病毒</li>
<li>损害宽带</li>
</ul>
<h4 id="索引技术"><a href="#索引技术" class="headerlink" title="索引技术"></a>索引技术</h4><p>P2P系统的索引：信息到节点位置(IP地址+端口号)的映射</p>
<ul>
<li>文件共享(电驴)<ul>
<li>利用索引动态跟踪节点所共享的文件的位置</li>
<li>节点需要告诉索引它拥有哪些文件</li>
<li>节点搜索索引，从而获知能够得到哪些文件</li>
</ul>
</li>
<li>即时消息(QQ)<ul>
<li>索引负责将用户名映射到位置</li>
<li>当用户开启IM应用时，需要通知索引它的位置</li>
<li>节点检索索引，确定用户的IP地址</li>
</ul>
</li>
</ul>
<h4 id="集中式索引"><a href="#集中式索引" class="headerlink" title="集中式索引"></a>集中式索引</h4><p>Napster最早采用这种设计</p>
<ul>
<li>节点加入时，通知中央服务器：IP地址、内容</li>
<li>Alice查找“Hey Jude”</li>
<li>Alice从Bob处请求文件</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171710706.png" alt="image-20220317155719586" style="zoom:67%;" /></p>
<p>问题：</p>
<ul>
<li>单点失效问题</li>
<li>性能瓶颈</li>
<li>版权问题</li>
</ul>
<h4 id="洪泛式查询"><a href="#洪泛式查询" class="headerlink" title="洪泛式查询"></a>洪泛式查询</h4><p>洪泛式<strong>Query flooding</strong>：<strong>完全分布式架构</strong>，Gnutella采用这种架构</p>
<ul>
<li>每个节点对它共享的文件进行索引，且只对它共享的文件</li>
</ul>
<p>覆盖网络(overlay network): Graph</p>
<ul>
<li>节点X与Y之间如果有TCP连接，那么构成一个边</li>
<li>所有的活动节点和边构成覆盖网络</li>
<li>边：虚拟链路</li>
<li>节点一般邻居数少于10个</li>
</ul>
<p>查询消息通过已有的TCP连接发送</p>
<p>节点转发查询消息</p>
<p>如果查询命中，则利用反向路径发回查询节点</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171710110.png" alt="image-20220317160239975" style="zoom:80%;" /></p>
<h4 id="层次式覆盖网络"><a href="#层次式覆盖网络" class="headerlink" title="层次式覆盖网络"></a>层次式覆盖网络</h4><ul>
<li>介于集中式索引和洪泛查询之间的方法</li>
<li>每个节点或者是一个超级节点，或者被分配一个超级节点<ul>
<li>节点和超级节点间维持TCP连接</li>
<li>某些超级节点对之间维持TCP连接</li>
</ul>
</li>
<li>超级节点负责跟踪子节点的内容</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171710302.png" alt="image-20220317160506839" style="zoom:67%;" /></p>
<p>应用案例：Skype</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171710190.png" alt="image-20220317160549951"></p>
<h3 id="Socket编程"><a href="#Socket编程" class="headerlink" title="Socket编程"></a>Socket编程</h3><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171710048.png" alt="image-20220317162738876"></p>
<p><strong>应用编程接口API</strong>（Application Programming Interface）</p>
<ul>
<li>就是应用进程的控制权和操作系统的控制权进行转换的一个系统调用接口。</li>
</ul>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171711099.png" alt="image-20220317162902970"></p>
<p>几种典型的应用编程接口</p>
<ul>
<li>Berkeley UNIX 操作系统定义了一种 API，称为套接字接口(socket interface)，简称<strong>套接字</strong>（socket）。</li>
<li>微软公司在其操作系统中采用了套接字接口 API，形成了一个稍有不同的 API，并称之为<br>Windows Socket Interface，<strong>WINSOCK</strong>。</li>
<li>AT&amp;T 为其 UNIX 系统 V 定义了一种 API，简写为 <strong>TLI</strong>（Transport Layer Interface）</li>
</ul>
<h4 id="Socket-API"><a href="#Socket-API" class="headerlink" title="Socket API"></a>Socket API</h4><p>最初设计</p>
<ul>
<li>面向BSD UNIX-Berkley</li>
<li>面向TCP/IP协议栈接口</li>
</ul>
<p>目前</p>
<ul>
<li>事实上的工业标准</li>
<li>绝大多数操作系统都支持</li>
</ul>
<p>Internet网络应用最典型的API接口</p>
<p>通信模型：客户/服务器（C/S）</p>
<p>是应用进程间通信的抽象机制</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171711591.png" alt="image-20220317163354413"></p>
<p>标识通信端点（对外）：IP地址+端口号</p>
<p>操作系统/进程如何管理套接字（对内）：<strong>套接字描述符</strong>（socket descriptor），是一个小整数</p>
<p>当应用进程创建套接字时，操作系统分配一个数据结构存储该套接字相关信息，返回套接字描述符。</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171711519.png" alt="image-20220317163550249"></p>
<p><strong>地址结构：</strong></p>
<p>已定义结构sockaddr_in:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    u_char sin_len; 	<span class="comment">/*地址长度 */</span></span><br><span class="line">    u_char sin_family; 	<span class="comment">/*地址族(TCP/IP：AF_INET) */</span></span><br><span class="line">    u_short sin_port;	<span class="comment">/*端口号 */</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">in_addr</span> <span class="title">sin_addr</span>;</span>	<span class="comment">/*IP地址 */</span></span><br><span class="line">    <span class="keyword">char</span> sin_zero[<span class="number">8</span>]; 			<span class="comment">/*未用(置0) */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用TCP/IP协议簇的网络应用程序声明端点地址变量时，使用结构sockaddr_in</p>
<h4 id="Socket-API函数"><a href="#Socket-API函数" class="headerlink" title="Socket API函数"></a>Socket API函数</h4><p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171711074.png" alt="image-20220317172333758" style="zoom:50%;" /></p>
<p><strong>1</strong>、<strong>WSAStartup</strong>：<code>int WSAStartup(WORD wVersionRequested, LPWSADATA lpWSAData);</code></p>
<p>使用Socket的应用程序在使用Socket之前必须首先调用WSAStartup函数</p>
<ul>
<li>第一个参数指明程序请求使用的WinSock版本，其中高位字节指明副版本、低位字节指明主版本.<ul>
<li>十六进制整数，例如0x102表示2.1版</li>
</ul>
</li>
<li>第二个参数返回实际的WinSock的版本信息，指向WSADATA结构的指针</li>
</ul>
<p>例：使用2.1版本的WinSock的程序代码段</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wVersionRequested = <span class="built_in">MAKEWORD</span>( <span class="number">2</span>, <span class="number">1</span> ); </span><br><span class="line">err = <span class="built_in">WSAStartup</span>( wVersionRequested, &amp;wsaData ); </span><br></pre></td></tr></table></figure>
<p><strong>2</strong>、<strong>WSACleanup</strong>：<code>int WSACleanup (void);</code></p>
<p>应用程序在完成对请求的Socket库的使用， 最后要调用WSACleanup函数，解除与Socket库的绑定，释放Socket库所占用的系统资源</p>
<p><strong>3</strong>、<strong>socket</strong>：<code>sd = socket(protofamily,type,proto);</code><br>创建套接字，操作系统返回套接字描述符（sd）</p>
<ul>
<li>第一个参数(协议族)：protofamily = PF_INET（TCP/IP）</li>
<li>第二个参数(套接字类型):<ul>
<li>type = SOCK_STREAM, SOCK_DGRAM or SOCK_RAW（TCP/IP）</li>
</ul>
</li>
<li>第三个参数(协议号):0为默认</li>
</ul>
<p>例：创建一个流套接字的代码段</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">protoent</span> *<span class="title">p</span>;</span> </span><br><span class="line">p=<span class="built_in">getprotobyname</span>(<span class="string">&quot;tcp&quot;</span>); </span><br><span class="line">SOCKET sd=<span class="built_in">socket</span>(PF_INET,SOCK_STREAM,p-&gt;p_proto); </span><br></pre></td></tr></table></figure>
<p>Socket面向TCP/IP的服务类型：</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171711636.png" alt="image-20220317173148158"></p>
<ul>
<li>TCP：可靠、面向连接、字节流传输、点对点</li>
<li>UDP：不可靠、无连接、数据报传输</li>
</ul>
<p><strong>4</strong>、<strong>closesocket</strong>：<code>int closesocket(SOCKET sd);</code></p>
<p>关闭一个描述符为sd的套接字</p>
<p>如果多个进程共享一个套接字，调用closesocket，将套接字引用计数减1，减至0才关闭</p>
<p>一个进程中的多线程对一个套接字的使用无计数。即如果进程中的一个线程调用closesocket将一个套接字关闭，该进程中的其他线程也将不能访问该套接字</p>
<p>返回值：0：成功、SOCKET_ERROR：失败</p>
<p><strong>5</strong>、<strong>bind</strong>：<code>int bind(sd,localaddr,addrlen);</code></p>
<p>绑定套接字的本地端点地址：IP地址+端口号</p>
<p>参数:</p>
<ul>
<li>套接字描述符（sd）</li>
<li>端点地址（localaddr）结构<strong>sockaddr_in</strong></li>
</ul>
<p>客户程序一般不必调用bind函数，服务器端一般必要</p>
<p>例：如下情形两个IP接入</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171711961.png" alt="image-20220317173641888"></p>
<p>解决方案——地址通配符：<code>INADDR_ANY</code></p>
<p><strong>6</strong>、<strong>listen</strong>：<code>int listen(sd, queuesize);</code></p>
<p>置服务器端的流套接字处于监听状态</p>
<ul>
<li>仅服务器端调用</li>
<li>仅用于面向连接的流套接字</li>
</ul>
<p>设置连接请求队列大小（queuesize）</p>
<p>返回值：0：成功  SOCKET_ERROR：失败</p>
<p><strong>7</strong>、<strong>connect</strong>：<code>connect(sd, saddr, saddrlen);</code></p>
<p>客户程序调用connect函数来使客户套接字（sd）与特定计算机的特定端口（saddr）的套接字（服务）进行连接</p>
<p>仅用于客户端</p>
<p>可用于TCP客户端也可以用于UDP客户端</p>
<ul>
<li>TCP客户端：建立TCP连接</li>
<li>UDP客户端：指定服务器端点地址</li>
</ul>
<p><strong>8</strong>、<strong>accept</strong>：<code>newsock = accept(sd, caddr, caddrlen);</code></p>
<p>服务程序调用accept函数从处于监听状态的流套接字sd的客户连接请求队列中取出排在最前的一个客户请求，并且<strong>创建一个新的套接字</strong>来与客户套接字创建连接通道</p>
<ul>
<li>仅用于TCP套接字</li>
<li>仅用于服务器</li>
</ul>
<p>利用新创建的套接字（newsock）与客户通信</p>
<p><strong>9</strong>、<strong>send</strong>：<code>send(sd, *buf, len, flags);</code></p>
<p>send函数用于TCP套接字（客户与服务器）或调用了connect函数的UDP客户端套接字</p>
<p><strong>10</strong>、<strong>sendto</strong>：<code>sendto(sd, *buf, len, flags, destaddr, addrlen);</code></p>
<p>sendto函数用于UDP服务器端套接字与未调用connect函数的UDP客户端套接字</p>
<p><strong>11</strong>、<strong>recv</strong>：<code>recv(sd, *buffer, len, flags);</code></p>
<p>recv函数从TCP连接的另一端接收数据，或者从调用了connect函数的UDP客户端套接字接收服务器发来的数据。</p>
<p><strong>12</strong>、<strong>recvfrom</strong>：<code>recvfrom(sd, *buf, len, flags, senderaddr, saddrlen);</code></p>
<p>recvfrom函数用于从UDP服务器端套接字与未调用connect函数的UDP客户端套接字接收对端数据</p>
<p><strong>13</strong>、<strong>setsockopt</strong>：<code>int setsockopt(int sd, int level, int optname, *optval, int optlen);</code></p>
<p>setsockopt()函数用来设置套接字sd的选项参数</p>
<p><strong>14</strong>、<strong>getsockopt</strong>：<code>int getsockopt(int sd, int level, int optname, *optval, socklen_t *optlen);</code></p>
<p>getsockopt()函数用于获取任意类型、任意状态套接口的选项当前值，并把结果存入optval</p>
<h4 id="API函数小结"><a href="#API函数小结" class="headerlink" title="API函数小结"></a>API函数小结</h4><p><strong>WSAStartup</strong>：初始化socket库(仅对WinSock)</p>
<p><strong>WSACleanup</strong>：清楚/终止socket库的使用 (仅对WinSock)</p>
<p><strong>socket</strong>：创建套接字</p>
<p><strong>connect</strong>：“连接”远端服务器 (仅用于客户端)</p>
<p><strong>closesocket</strong>：释放/关闭套接字</p>
<p><strong>bind</strong>：绑定套接字的本地IP地址和端口号（通常客户端不需要）</p>
<p><strong>listen</strong>：置服务器端TCP套接字为监听模式，并设置队列大小 (仅用于服务器端TCP套接字)</p>
<p><strong>accept</strong>：接受/提取一个连接请求，创建新套接字，通过新套接 (仅用于服务器端的TCP套接字)</p>
<p><strong>recv</strong>：接收数据（用于TCP套接字或连接模式的客户端UDP套接字）</p>
<p><strong>recvfrom</strong>：接收数据报（用于非连接模式的UDP套接字）</p>
<p><strong>send</strong>：发送数据（用于TCP套接字或连接模式的客户端UDP套接字）</p>
<p><strong>sendto</strong>：发送数据报（用于非连接模式的UDP套接字）</p>
<p><strong>setsockopt</strong>：设置套接字选项参数</p>
<p><strong>getsockopt</strong>：获取套接字选项参数</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171711321.png" alt="image-20220318105429826"></p>
<h4 id="网络字节顺序"><a href="#网络字节顺序" class="headerlink" title="网络字节顺序"></a>网络字节顺序</h4><p>TCP/IP定义了标准的用于协议头中的二进制整数表示：网络字节顺序（network byte order）</p>
<p>某些Socket API函数的参数需要存储为网络字节顺序（如IP地址、端口号等）</p>
<p>可以实现本地字节顺序与网络字节顺序间转换的函数</p>
<ul>
<li><strong>htons</strong>：本地字节顺序→网络字节顺序(16bits)</li>
<li><strong>ntohs</strong>：网络字节顺序→本地字节顺序(16bits)</li>
<li><strong>htonl</strong>：本地字节顺序→网络字节顺序(32bits)</li>
<li><strong>ntohl</strong>：网络字节顺序→本地字节顺序(32bits)</li>
</ul>
<h4 id="解析IP地址"><a href="#解析IP地址" class="headerlink" title="解析IP地址"></a>解析IP地址</h4><p>客户端可能使用<strong>域名</strong>（如:study.163.com）或<strong>IP地址</strong>（如：123.58.180.121）标识服务器</p>
<p>IP协议需要使用<strong>32位二进制</strong>IP地址，需要将域名或IP地址转换为32位IP地址</p>
<p>函数<code>inet_addr()</code> 实现点分十进制IP地址到32位IP地址转换</p>
<p>函数<code>gethostbyname()</code>实现域名到32位IP地址转换，返回一个指向结构<code>hostent</code>的指针</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">hostent</span> &#123;</span> </span><br><span class="line">    <span class="keyword">char</span> FAR* h_name; 			<span class="comment">/*official host name */</span> </span><br><span class="line">    <span class="keyword">char</span> FAR* FAR* h_aliases; 	<span class="comment">/*other aliases */</span> </span><br><span class="line">    <span class="keyword">short</span> h_addrtype; 			<span class="comment">/*address type */</span> </span><br><span class="line">    <span class="keyword">short</span> h_lengty; 			<span class="comment">/*address length */</span> </span><br><span class="line">    <span class="keyword">char</span> FAR* FAR* h_addr_list; <span class="comment">/*list of address */</span> </span><br><span class="line">&#125;; </span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> h_addr h_addr_list[0] </span></span><br></pre></td></tr></table></figure>
<h4 id="解析端口号"><a href="#解析端口号" class="headerlink" title="解析端口号"></a>解析端口号</h4><p>客户端还可能使用服务名（如HTTP）标识服务器端口，需要将服务名转换为熟知端口号</p>
<p>函数<code>getservbyname( )</code>，返回一个指向结构<code>servent</code>的指针</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">servent</span> &#123;</span> </span><br><span class="line">    <span class="keyword">char</span> FAR* s_name; 			<span class="comment">/*official service name */</span> </span><br><span class="line">    <span class="keyword">char</span> FAR* FAR* s_aliases; 	<span class="comment">/*other aliases */</span> </span><br><span class="line">    <span class="keyword">short</span> s_port; 				<span class="comment">/*port for this service */</span> </span><br><span class="line">    <span class="keyword">char</span> FAR* s_proto; 			<span class="comment">/*protocol to use */</span> </span><br><span class="line">&#125;; </span><br></pre></td></tr></table></figure>
<h4 id="解析协议号"><a href="#解析协议号" class="headerlink" title="解析协议号"></a>解析协议号</h4><p>客户端可能使用协议名（如:TCP）指定协议，需要将协议名转换为协议号（如：6）</p>
<p>函数<code>getprotobyname()</code> 实现协议名到协议号的转换，返回一个指向结构<code>protoent</code>的指针</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">protoent</span> &#123;</span> </span><br><span class="line">    <span class="keyword">char</span> FAR* p_name; 			<span class="comment">/*official protocol name */</span> </span><br><span class="line">    <span class="keyword">char</span> FAR* FAR* p_aliases; 	<span class="comment">/*list of aliases allowed */</span> </span><br><span class="line">    <span class="keyword">short</span> p_proto; 				<span class="comment">/*official protocol number*/</span> </span><br><span class="line">&#125;; </span><br></pre></td></tr></table></figure>
<h4 id="客户端软件流程"><a href="#客户端软件流程" class="headerlink" title="客户端软件流程"></a>客户端软件流程</h4><p><strong>TCP</strong>：</p>
<ol>
<li><p>确定服务器IP地址与端口号</p>
</li>
<li><p>创建套接字</p>
</li>
<li>分配本地端点地址（IP地址+端口号）</li>
<li>连接服务器（套接字）</li>
<li>遵循应用层协议进行通信</li>
<li>关闭/释放连接</li>
</ol>
<p><strong>UDP</strong>：</p>
<ol>
<li>确定服务器IP地址与端口号</li>
<li>创建套接字</li>
<li>分配本地端点地址（IP地址+端口号）</li>
<li>指定服务器端点地址，构造UDP数据报</li>
<li>遵循应用层协议进行通信</li>
<li>关闭/释放套接字</li>
</ol>
<h4 id="服务器基本流程"><a href="#服务器基本流程" class="headerlink" title="服务器基本流程"></a>服务器基本流程</h4><p>4种类型基本服务器</p>
<ul>
<li><strong>循环无连接</strong>（Iterative connectionless）服务器</li>
<li><strong>循环面向连接</strong>（Iterative connection-oriented）服务器</li>
<li><strong>并发无连接</strong>（Concurrent connectionless）服务器</li>
<li><strong>并发面向连接</strong>（Concurrent connection-oriented）服务器</li>
</ul>
<p><strong>循环无连接服务器</strong></p>
<ol>
<li>创建套接字</li>
<li>绑定端点地址（INADDR_ANY+端口号）</li>
<li>反复接收来自客户端的请求</li>
<li>遵循应用层协议，构造响应报文，发送客户</li>
</ol>
<p><strong>循环面向连接服务器</strong></p>
<ol>
<li>创建（主）套接字，并绑定熟知端口号；</li>
<li>设置（主）套接字为被动监听模式，准备用于服务器；</li>
<li>调用accept()函数接收下一个连接请求（通过主套接字），创建新套接字用于与该客户建立<br>连接；</li>
<li>遵循应用层协议，反复接收客户请求，构造并发送响应(通过新套接字)；</li>
<li>完成为特定客户服务后，关闭与该客户之间的连接，返回步骤3</li>
</ol>
<p><strong>并发无连接服务器</strong>：</p>
<p>主线程第一步：创建套接字，并绑定熟知端口号；</p>
<p>主线程第二步：反复调用recvfrom()函数，接收下一个客户请求，并创建新线程处理该客户响<br>应；</p>
<p>子线程第一步：接收一个特定请求；</p>
<p>子线程第二步：依据应用层协议构造响应报文，并调用sendto()发送；</p>
<p>子线程第三步：退出(一个子线程处理一个请求后即终止)</p>
<p><strong>并发面向连接服务器</strong></p>
<p>主线程第一步：创建（主）套接字，并绑定熟知端口号；</p>
<p>主线程第二步：设置（主）套接字为被动监听模式，准备用于服务器；</p>
<p>主线程第三步：反复调用accept()函数接收下一个连接请求（通过主套接字），并创建一个新<br>的子线程处理该客户响应；</p>
<p>子线程第一步：接收一个客户的服务请求（通过新创建的套接字）；</p>
<p>子线程第二步：遵循应用层协议与特定客户进行交互；</p>
<p>子线程第三步：关闭/释放连接并退出（线程终止）</p>
<p>数据发送：</p>
<p>服务器端不能使用connect()函数</p>
<p>无连接服务器使用sendto()函数发送数据报</p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171715110.png" alt="image-20220318160106465"></p>
<p>调用recvfrom()函数接收数据时，自动提取<strong>客户端点地址</strong></p>
<p><img src="https://gitee.com/yanglinqi107/Images/raw/master/res/202205171715023.png" alt="image-20220318162725484"></p>

    </div>

    
    
    
        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
        </div>
    </div>
  </div>


      
      
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Internet"><span class="nav-number">1.1.</span> <span class="nav-text">Internet</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%8F%E8%AE%AE"><span class="nav-number">1.2.</span> <span class="nav-text">协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84"><span class="nav-number">1.3.</span> <span class="nav-text">计算机网络结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Internet%E7%BB%93%E6%9E%84"><span class="nav-number">1.4.</span> <span class="nav-text">Internet结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E6%A0%B8%E5%BF%83%E4%B9%8B%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2"><span class="nav-number">1.5.</span> <span class="nav-text">网络核心之数据交换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2VS%E6%8A%A5%E6%96%87%E4%BA%A4%E6%8D%A2"><span class="nav-number">1.6.</span> <span class="nav-text">分组交换VS报文交换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2VS%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2"><span class="nav-number">1.7.</span> <span class="nav-text">分组交换VS电路交换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8"><span class="nav-number">1.8.</span> <span class="nav-text">多路复用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E6%80%A7%E8%83%BD"><span class="nav-number">2.</span> <span class="nav-text">网络性能</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9F%E7%8E%87%E5%92%8C%E5%B8%A6%E5%AE%BD"><span class="nav-number">2.1.</span> <span class="nav-text">速率和带宽</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%85%E8%BD%AC%E5%8F%91%E7%8E%87"><span class="nav-number">2.2.</span> <span class="nav-text">包转发率</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%B6%E8%BF%9F-%E6%97%B6%E5%BB%B6"><span class="nav-number">2.3.</span> <span class="nav-text">延迟&#x2F;时延</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RTT"><span class="nav-number">2.4.</span> <span class="nav-text">RTT</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%B6%E5%BB%B6%E5%B8%A6%E5%AE%BD%E7%A7%AF"><span class="nav-number">2.5.</span> <span class="nav-text">时延带宽积</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%A2%E5%8C%85%E7%8E%87"><span class="nav-number">2.6.</span> <span class="nav-text">丢包率</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%9E%E5%90%90%E9%87%8F-%E7%8E%87"><span class="nav-number">2.7.</span> <span class="nav-text">吞吐量&#x2F;率</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%B6%E5%BB%B6%E6%8A%96%E5%8A%A8"><span class="nav-number">2.8.</span> <span class="nav-text">时延抖动</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="nav-number">3.</span> <span class="nav-text">体系结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#OSI%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%83%E5%B1%82%EF%BC%89"><span class="nav-number">3.1.</span> <span class="nav-text">OSI参考模型（七层）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%A9%E7%90%86%E5%B1%82%E5%8A%9F%E8%83%BD"><span class="nav-number">3.2.</span> <span class="nav-text">物理层功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%8A%9F%E8%83%BD"><span class="nav-number">3.3.</span> <span class="nav-text">数据链路层功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8A%9F%E8%83%BD"><span class="nav-number">3.4.</span> <span class="nav-text">网络层功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8A%9F%E8%83%BD"><span class="nav-number">3.5.</span> <span class="nav-text">传输层功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%9A%E8%AF%9D%E5%B1%82%E5%8A%9F%E8%83%BD"><span class="nav-number">3.6.</span> <span class="nav-text">会话层功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A8%E7%A4%BA%E5%B1%82%E5%8A%9F%E8%83%BD"><span class="nav-number">3.7.</span> <span class="nav-text">表示层功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82%E5%8A%9F%E8%83%BD"><span class="nav-number">3.8.</span> <span class="nav-text">应用层功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-IP%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B%EF%BC%88%E5%9B%9B%E5%B1%82%EF%BC%89"><span class="nav-number">3.9.</span> <span class="nav-text">TCP&#x2F;IP参考模型（四层）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5%E5%B1%82%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B"><span class="nav-number">3.10.</span> <span class="nav-text">5层参考模型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8"><span class="nav-number">4.</span> <span class="nav-text">网络应用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84-1"><span class="nav-number">4.1.</span> <span class="nav-text">体系结构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#C-S%E7%BB%93%E6%9E%84"><span class="nav-number">4.1.1.</span> <span class="nav-text">C&#x2F;S结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#P2P%E7%BB%93%E6%9E%84"><span class="nav-number">4.1.2.</span> <span class="nav-text">P2P结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%B7%E5%90%88%E7%BB%93%E6%9E%84"><span class="nav-number">4.1.3.</span> <span class="nav-text">混合结构</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1"><span class="nav-number">4.2.</span> <span class="nav-text">进程通信</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A5%97%E6%8E%A5%E5%AD%97"><span class="nav-number">4.2.1.</span> <span class="nav-text">套接字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%BB%E5%9D%80%E8%BF%9B%E7%A8%8B"><span class="nav-number">4.2.2.</span> <span class="nav-text">寻址进程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE"><span class="nav-number">4.2.3.</span> <span class="nav-text">应用层协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%B9%E4%BC%A0%E8%BE%93%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%9C%80%E6%B1%82"><span class="nav-number">4.2.4.</span> <span class="nav-text">对传输服务的需求</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Web%E5%BA%94%E7%94%A8"><span class="nav-number">4.3.</span> <span class="nav-text">Web应用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP"><span class="nav-number">4.3.1.</span> <span class="nav-text">HTTP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP%E8%BF%9E%E6%8E%A5"><span class="nav-number">4.3.2.</span> <span class="nav-text">HTTP连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP%E7%9A%84%E6%B6%88%E6%81%AF%E6%A0%BC%E5%BC%8F"><span class="nav-number">4.3.3.</span> <span class="nav-text">HTTP的消息格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E4%BB%A3%E7%A0%81"><span class="nav-number">4.3.4.</span> <span class="nav-text">响应状态代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cookie%E6%8A%80%E6%9C%AF"><span class="nav-number">4.3.5.</span> <span class="nav-text">Cookie技术</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Web%E7%BC%93%E5%AD%98-%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8A%80%E6%9C%AF"><span class="nav-number">4.3.6.</span> <span class="nav-text">Web缓存&#x2F;代理服务器技术</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Email%E5%BA%94%E7%94%A8"><span class="nav-number">4.4.</span> <span class="nav-text">Email应用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SMTP%E5%8D%8F%E8%AE%AE"><span class="nav-number">4.4.1.</span> <span class="nav-text">SMTP协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8EHTTP%E5%AF%B9%E6%AF%94"><span class="nav-number">4.4.2.</span> <span class="nav-text">与HTTP对比</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Email%E6%B6%88%E6%81%AF%E6%A0%BC%E5%BC%8F"><span class="nav-number">4.4.3.</span> <span class="nav-text">Email消息格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E5%AA%92%E4%BD%93%E6%89%A9%E5%B1%95"><span class="nav-number">4.4.4.</span> <span class="nav-text">多媒体扩展</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%82%AE%E4%BB%B6%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE"><span class="nav-number">4.4.5.</span> <span class="nav-text">邮件访问协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#POP%E5%8D%8F%E8%AE%AE"><span class="nav-number">4.4.6.</span> <span class="nav-text">POP协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IMAP%E5%8D%8F%E8%AE%AE"><span class="nav-number">4.4.7.</span> <span class="nav-text">IMAP协议</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DNS%E5%BA%94%E7%94%A8"><span class="nav-number">4.5.</span> <span class="nav-text">DNS应用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS%E7%BB%93%E6%9E%84"><span class="nav-number">4.5.1.</span> <span class="nav-text">DNS结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%B1%BB%E5%9E%8B"><span class="nav-number">4.5.2.</span> <span class="nav-text">域名服务器类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.5.3.</span> <span class="nav-text">DNS查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS%E7%BC%93%E5%AD%98"><span class="nav-number">4.5.4.</span> <span class="nav-text">DNS缓存</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS%E8%AE%B0%E5%BD%95%E6%A0%BC%E5%BC%8F"><span class="nav-number">4.5.5.</span> <span class="nav-text">DNS记录格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DNS%E6%B6%88%E6%81%AF%E6%A0%BC%E5%BC%8F"><span class="nav-number">4.5.6.</span> <span class="nav-text">DNS消息格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%9F%E5%90%8D%E6%B3%A8%E5%86%8C"><span class="nav-number">4.5.7.</span> <span class="nav-text">域名注册</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#P2P%E5%BA%94%E7%94%A8"><span class="nav-number">4.6.</span> <span class="nav-text">P2P应用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#BitTorrent-BT"><span class="nav-number">4.6.1.</span> <span class="nav-text">BitTorrent(BT)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95%E6%8A%80%E6%9C%AF"><span class="nav-number">4.6.2.</span> <span class="nav-text">索引技术</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%B4%A2%E5%BC%95"><span class="nav-number">4.6.3.</span> <span class="nav-text">集中式索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B4%AA%E6%B3%9B%E5%BC%8F%E6%9F%A5%E8%AF%A2"><span class="nav-number">4.6.4.</span> <span class="nav-text">洪泛式查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B1%82%E6%AC%A1%E5%BC%8F%E8%A6%86%E7%9B%96%E7%BD%91%E7%BB%9C"><span class="nav-number">4.6.5.</span> <span class="nav-text">层次式覆盖网络</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Socket%E7%BC%96%E7%A8%8B"><span class="nav-number">4.7.</span> <span class="nav-text">Socket编程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Socket-API"><span class="nav-number">4.7.1.</span> <span class="nav-text">Socket API</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Socket-API%E5%87%BD%E6%95%B0"><span class="nav-number">4.7.2.</span> <span class="nav-text">Socket API函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#API%E5%87%BD%E6%95%B0%E5%B0%8F%E7%BB%93"><span class="nav-number">4.7.3.</span> <span class="nav-text">API函数小结</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%AD%97%E8%8A%82%E9%A1%BA%E5%BA%8F"><span class="nav-number">4.7.4.</span> <span class="nav-text">网络字节顺序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E6%9E%90IP%E5%9C%B0%E5%9D%80"><span class="nav-number">4.7.5.</span> <span class="nav-text">解析IP地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E6%9E%90%E7%AB%AF%E5%8F%A3%E5%8F%B7"><span class="nav-number">4.7.6.</span> <span class="nav-text">解析端口号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE%E5%8F%B7"><span class="nav-number">4.7.7.</span> <span class="nav-text">解析协议号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BD%AF%E4%BB%B6%E6%B5%81%E7%A8%8B"><span class="nav-number">4.7.8.</span> <span class="nav-text">客户端软件流程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="nav-number">4.7.9.</span> <span class="nav-text">服务器基本流程</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="yanglinqi"
      src="/images/headpic.jpg">
  <p class="site-author-name" itemprop="name">yanglinqi</p>
  <div class="site-description" itemprop="description">用于做笔记，对学过的知识总结</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">100</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">30</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/yanglinqi107" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yanglinqi107" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yanglinqi</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  


  <script async src="/js/cursor/fireworks.js"></script>


</body>
</html>
