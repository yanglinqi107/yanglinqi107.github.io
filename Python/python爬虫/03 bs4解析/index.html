<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
<meta name="referrer" content="no-referrer">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/icon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/icon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yanglinqi107.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="bs4 全名 BeautifulSoup，是编写 python 爬虫常用库之一，主要用来解析 html 标签。">
<meta property="og:type" content="article">
<meta property="og:title" content="bs4解析">
<meta property="og:url" content="http://yanglinqi107.github.io/Python/python%E7%88%AC%E8%99%AB/03%20bs4%E8%A7%A3%E6%9E%90/index.html">
<meta property="og:site_name" content="杨记">
<meta property="og:description" content="bs4 全名 BeautifulSoup，是编写 python 爬虫常用库之一，主要用来解析 html 标签。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-12-12T08:35:00.000Z">
<meta property="article:modified_time" content="2022-07-27T02:49:55.542Z">
<meta property="article:author" content="yanglinqi">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yanglinqi107.github.io/Python/python%E7%88%AC%E8%99%AB/03%20bs4%E8%A7%A3%E6%9E%90/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>bs4解析 | 杨记</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">杨记</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">碎片化学习令人焦虑，系统化学习使人进步</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">22</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">18</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">100</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yanglinqi107.github.io/Python/python%E7%88%AC%E8%99%AB/03%20bs4%E8%A7%A3%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/headpic.jpg">
      <meta itemprop="name" content="yanglinqi">
      <meta itemprop="description" content="用于做笔记，对学过的知识总结">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="杨记">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          bs4解析
        </h1>

        <div class="post-meta">

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-12 16:35:00" itemprop="dateCreated datePublished" datetime="2021-12-12T16:35:00+08:00">2021-12-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-07-27 10:49:55" itemprop="dateModified" datetime="2022-07-27T10:49:55+08:00">2022-07-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python%E7%88%AC%E8%99%AB/" itemprop="url" rel="index"><span itemprop="name">Python爬虫</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>bs4 全名 BeautifulSoup，是编写 python 爬虫常用库之一，主要用来解析 html 标签。</p>
<span id="more"></span>
<p>一点点HTML基础知识</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;标签 属性=&quot;值&quot; 属性=&quot;值&quot;&gt;</span><br><span class="line">	被标记的内容</span><br><span class="line">&lt;/标签&gt;</span><br></pre></td></tr></table></figure>
<p>安装bs4（清华源）</p>
<p>方法1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install bs4 -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure>
<p>方法2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">- 需要将pip源设置为国内源，阿里源、豆瓣源、网易源等</span><br><span class="line">   - windows</span><br><span class="line">    （1）打开文件资源管理器(文件夹地址栏中)</span><br><span class="line">    （2）地址栏上面输入 %appdata%</span><br><span class="line">    （3）在这里面新建一个文件夹  pip</span><br><span class="line">    （4）在pip文件夹里面新建一个文件叫做  pip.ini ,内容写如下即可</span><br><span class="line">        [global]</span><br><span class="line">        timeout = 6000</span><br><span class="line">        index-url = https://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">        trusted-host = mirrors.aliyun.com</span><br><span class="line">   - linux</span><br><span class="line">    （1）cd ~</span><br><span class="line">    （2）mkdir ~/.pip</span><br><span class="line">    （3）vi ~/.pip/pip.conf</span><br><span class="line">    （4）编辑内容，和windows一模一样</span><br><span class="line">- 需要安装：pip install bs4</span><br><span class="line">     bs4在使用时候需要一个第三方库，把这个库也安装一下</span><br><span class="line">     pip install lxml  </span><br></pre></td></tr></table></figure>
<p>使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">使用流程：       </span><br><span class="line">    - 导包：from bs4 import BeautifulSoup</span><br><span class="line">    - 使用方式：可以将一个html文档，转化为BeautifulSoup对象，然后通过对象的方法或者属性去查找指定的节点内容</span><br><span class="line">        （1）转化本地文件：</span><br><span class="line">             - soup = BeautifulSoup(open(&#x27;本地文件&#x27;), &#x27;lxml&#x27;)</span><br><span class="line">        （2）转化网络文件：</span><br><span class="line">             - soup = BeautifulSoup(&#x27;字符串类型或者字节类型&#x27;, &#x27;lxml&#x27;)</span><br><span class="line">        （3）打印soup对象显示内容为html文件中的内容</span><br><span class="line">基础巩固：</span><br><span class="line">    （1）根据标签名查找</span><br><span class="line">        - soup.a   只能找到第一个符合要求的标签</span><br><span class="line">    （2）获取属性</span><br><span class="line">        - soup.a.attrs  获取a所有的属性和属性值，返回一个字典</span><br><span class="line">        - soup.a.attrs[&#x27;href&#x27;]   获取href属性</span><br><span class="line">        - soup.a[&#x27;href&#x27;]   也可简写为这种形式</span><br><span class="line">    （3）获取内容</span><br><span class="line">        - soup.a.string</span><br><span class="line">        - soup.a.text</span><br><span class="line">        - soup.a.get_text()</span><br><span class="line">       【注意】如果标签还有标签，那么string获取到的结果为None，而其它两个，可以获取文本内容</span><br><span class="line">    （4）find：找到第一个符合要求的标签</span><br><span class="line">        - soup.find(&#x27;a&#x27;)  找到第一个符合要求的</span><br><span class="line">        - soup.find(&#x27;a&#x27;, title=&quot;xxx&quot;)</span><br><span class="line">        - soup.find(&#x27;a&#x27;, alt=&quot;xxx&quot;)</span><br><span class="line">        - soup.find(&#x27;a&#x27;, class_=&quot;xxx&quot;)</span><br><span class="line">        - soup.find(&#x27;a&#x27;, id=&quot;xxx&quot;)</span><br><span class="line">    （5）find_all：找到所有符合要求的标签</span><br><span class="line">        - soup.find_all(&#x27;a&#x27;)</span><br><span class="line">        - soup.find_all([&#x27;a&#x27;,&#x27;b&#x27;]) 找到所有的a和b标签</span><br><span class="line">        - soup.find_all(&#x27;a&#x27;, limit=2)  限制前两个</span><br><span class="line">    （6）根据选择器选择指定的内容</span><br><span class="line">               select:soup.select(&#x27;#feng&#x27;)</span><br><span class="line">        - 常见的选择器：标签选择器(a)、类选择器(.)、id选择器(#)、层级选择器</span><br><span class="line">            - 层级选择器：</span><br><span class="line">                div .dudu #lala .meme .xixi  下面好多级</span><br><span class="line">                div &gt; p &gt; a &gt; .lala          只能是下面一级</span><br><span class="line">        【注意】select选择器返回永远是列表，需要通过下标提取指定的对象</span><br></pre></td></tr></table></figure>
<p>示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="comment">#需求：爬取三国演义小说所有的章节标题和章节内容http://www.shicimingju.com/book/sanguoyanyi.html</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment">#对首页的页面数据进行爬取</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>:</span><br><span class="line">        <span class="string">&#x27;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.121 Safari/537.36&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    url = <span class="string">&#x27;http://www.shicimingju.com/book/sanguoyanyi.html&#x27;</span></span><br><span class="line">    page_text = requests.get(url=url, headers=headers).text</span><br><span class="line"></span><br><span class="line">    <span class="comment">#在首页中解析出章节的标题和详情页的url</span></span><br><span class="line">    <span class="comment">#1.实例化BeautifulSoup对象，需要将页面源码数据加载到该对象中</span></span><br><span class="line">    soup = BeautifulSoup(page_text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">    <span class="comment">#解析章节标题和详情页的url</span></span><br><span class="line">    li_list = soup.select(<span class="string">&#x27;.book-mulu &gt; ul &gt; li&#x27;</span>)</span><br><span class="line">    fp = <span class="built_in">open</span>(<span class="string">&#x27;./sanguo.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> li <span class="keyword">in</span> li_list:</span><br><span class="line">        title = li.a.string</span><br><span class="line">        detail_url = <span class="string">&#x27;http://www.shicimingju.com&#x27;</span> + li.a[<span class="string">&#x27;href&#x27;</span>]</span><br><span class="line">        <span class="comment">#对详情页发起请求，解析出章节内容</span></span><br><span class="line">        detail_page_text = requests.get(url=detail_url, headers=headers).text</span><br><span class="line">        <span class="comment">#解析出详情页中相关的章节内容</span></span><br><span class="line">        detail_soup = BeautifulSoup(detail_page_text, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">        div_tag = detail_soup.find(<span class="string">&#x27;div&#x27;</span>, class_=<span class="string">&#x27;chapter_content&#x27;</span>)</span><br><span class="line">        <span class="comment">#解析到了章节的内容</span></span><br><span class="line">        content = div_tag.text</span><br><span class="line">        fp.write(title + <span class="string">&#x27;:&#x27;</span> + content + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(title, <span class="string">&#x27;爬取成功！！！&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="详细使用"><a href="#详细使用" class="headerlink" title="详细使用"></a>详细使用</h3><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/gl1573/p/9480022.html">【Python 库】bs4的使用 - 丹枫无迹 - 博客园 (cnblogs.com)</a></p>
<p><strong>一、初始化</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(<span class="string">&quot;&lt;html&gt;A Html Text&lt;/html&gt;&quot;</span>, <span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line"></span><br><span class="line">第一个参数是要解析的html文本，第二个参数是解析器</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th>解析器</th>
<th>使用方法</th>
<th>优势</th>
</tr>
</thead>
<tbody>
<tr>
<td>Python标准库</td>
<td>BeautifulSoup(html, “html.parser”)</td>
<td>1、Python的内置标准库<br>2、执行速度适中<br>3、文档容错能力强</td>
</tr>
<tr>
<td>lxml HTML</td>
<td>BeautifulSoup(html, “lxml”)</td>
<td>1、速度快<br>2、文档容错能力强</td>
</tr>
<tr>
<td>lxml XML</td>
<td>BeautifulSoup(html, [“lxml”, “xml”])<br>BeautifulSoup(html, “xml”)</td>
<td>1、速度快<br>2、唯一支持XML的解析器</td>
</tr>
<tr>
<td>html5lib</td>
<td>BeautifulSoup(html, “html5lib”)</td>
<td>1、最好的容错性<br>2、以浏览器的方式解析文档<br>3、生成HTML5格式的文档</td>
</tr>
</tbody>
</table>
</div>
<p>格式化输出</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">soup.prettify()  <span class="comment"># prettify 有括号和没括号都可以</span></span><br></pre></td></tr></table></figure>
<p><strong>二、对象</strong></p>
<p>　　Beautfiful Soup将复杂HTML文档转换成一个复杂的树形结构，每个节点都是Python对象，所有对象可以归纳为4种：tag，NavigableString，BeautifulSoup，Comment。</p>
<p><strong>1、tag</strong></p>
<p>　　Tag对象与 xml 或 html 原生文档中的 tag 相同。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(<span class="string">&#x27;&lt;b class=&quot;boldest&quot;&gt;Extremely bold&lt;/b&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">tag = soup.b</span><br><span class="line"></span><br><span class="line"><span class="built_in">type</span>(tag)</span><br><span class="line"></span><br><span class="line"><span class="comment"># &lt;class &#x27;bs4.element.Tag&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
<p>　　如果不存在，则返回 None，如果存在多个，则返回第一个。</p>
<p><strong>Name</strong></p>
<p>　　每个 tag 都有自己的名字</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tag.name </span><br><span class="line"><span class="comment"># &#x27;b&#x27;</span></span><br></pre></td></tr></table></figure>
<p><strong>Attributes</strong></p>
<p>　　tag 的属性是一个字典</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tag[<span class="string">&#x27;class&#x27;</span>]</span><br><span class="line"><span class="comment"># &#x27;boldest&#x27;</span></span><br><span class="line"></span><br><span class="line">tag.attrs</span><br><span class="line"><span class="comment"># &#123;&#x27;class&#x27;: &#x27;boldest&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">type</span>(tag.attrs)</span><br><span class="line"><span class="comment"># &lt;class &#x27;dict&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>多值属性</strong></p>
<p>　　最常见的多值属性是class，多值属性的返回 list。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(<span class="string">&#x27;&lt;p class=&quot;body strikeout&quot;&gt;&lt;/p&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.p[<span class="string">&#x27;class&#x27;</span>])  <span class="comment"># [&#x27;body&#x27;, &#x27;strikeout&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.p.attrs)     <span class="comment"># &#123;&#x27;class&#x27;: [&#x27;body&#x27;, &#x27;strikeout&#x27;]&#125;</span></span><br></pre></td></tr></table></figure>
<p>　　如果某个属性看起来好像有多个值,但在任何版本的HTML定义中都没有被定义为多值属性，那么Beautiful Soup会将这个属性作为字符串返回。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(<span class="string">&#x27;&lt;p id=&quot;my id&quot;&gt;&lt;/p&gt;&#x27;</span>, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(soup.p[<span class="string">&#x27;id&#x27;</span>])    <span class="comment"># &#x27;my id&#x27;</span></span><br></pre></td></tr></table></figure>
<p><strong>Text</strong></p>
<p>　　text 属性返回 tag 的所有字符串连成的字符串。</p>
<p><strong>其他方法</strong></p>
<p>　　<code>tag.has_attr(&#39;id&#39;)</code>   # 返回 tag 是否包含 id 属性</p>
<p>　　当然，以上代码还可以写成 ‘id’ in tag.attrs，之前说过，tag 的属性是一个字典。顺便提一下，has_key是老旧遗留的api，为了支持2.2之前的代码留下的。Python3已经删除了该函数。</p>
<p><strong>2、NavigableString</strong></p>
<p>　　字符串常被包含在 tag 内，Beautiful Soup 用 NavigableString 类来包装 tag 中的字符串。但是字符串中不能包含其他 tag。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(<span class="string">&#x27;&lt;b class=&quot;boldest&quot;&gt;Extremely bold&lt;/b&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">s = soup.b.string</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s)        <span class="comment"># Extremely bold</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(s))  <span class="comment"># &lt;class &#x27;bs4.element.NavigableString&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>3、BeautifulSoup</strong></p>
<p>　　BeautifulSoup 对象表示的是一个文档的全部内容。大部分时候，可以把它当作 Tag 对象。但是 BeautifulSoup 对象并不是真正的 HTM L或 XML 的 tag，它没有attribute属性，name 属性是一个值为“[document]”的特殊属性。</p>
<p><strong>4、Comment</strong></p>
<p>　　Comment 一般表示文档的注释部分。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(<span class="string">&#x27;&lt;b class=&quot;boldest&quot;&gt;Extremely bold&lt;/b&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">s = soup.b.string</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(s)        <span class="comment"># Extremely bold</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(s))  <span class="comment"># &lt;class &#x27;bs4.element.NavigableString&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>三、遍历</strong> </p>
<p><strong>1、子节点</strong></p>
<p><strong>contents</strong> <strong>属性</strong></p>
<p>　　contents 属性返回所有子节点的列表，包括 NavigableString 类型节点。如果节点当中有换行符，会被当做是 NavigableString 类型节点而作为一个子节点。</p>
<p>　　NavigableString 类型节点没有 contents 属性，因为没有子节点。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(<span class="string">&quot;&quot;&quot;&lt;div&gt;</span></span><br><span class="line"><span class="string">&lt;span&gt;test&lt;/span&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">element = soup.div.contents</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(element)          <span class="comment"># [&#x27;\n&#x27;, &lt;span&gt;test&lt;/span&gt;, &#x27;\n&#x27;]</span></span><br></pre></td></tr></table></figure>
<p><strong>children</strong> <strong>属性</strong></p>
<p>　　children 属性跟 contents 属性基本一样，只不过返回的不是子节点列表，而是子节点的可迭代对象。</p>
<p><strong>descendants</strong> <strong>属性</strong></p>
<p>　　descendants 属性返回 tag 的所有子孙节点。</p>
<p><strong>string</strong> <strong>属性</strong></p>
<p>　　如果 tag 只有一个 NavigableString 类型子节点，那么这个 tag 可以使用 .string 得到子节点。</p>
<p>　　如果一个 tag 仅有一个子节点，那么这个 tag 也可以使用 .string 方法，输出结果与当前唯一子节点的 .string 结果相同。</p>
<p>　　如果 tag 包含了多个子节点，tag 就无法确定 .string 方法应该调用哪个子节点的内容, .string 的输出结果是 None。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(<span class="string">&quot;&quot;&quot;&lt;div&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;&lt;span&gt;&lt;b&gt;test&lt;/b&gt;&lt;/span&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>)</span><br><span class="line"></span><br><span class="line">element = soup.p.string</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(element)          <span class="comment"># test</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(element))    <span class="comment"># &lt;class &#x27;bs4.element.NavigableString&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
<p>　　特别注意，为了清楚显示，一般我们会将 html 节点换行缩进显示，而在BeautifulSoup 中会被认为是一个 NavigableString 类型子节点，导致出错。上例中，如果改成 element = soup.div.string 就会出错。</p>
<p><strong>strings</strong> <strong>和 stripped_strings 属性</strong></p>
<p>　　如果 tag 中包含多个字符串，可以用 strings 属性来获取。如果返回结果中要去除空行，则可以用 stripped_strings 属性。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(<span class="string">&quot;&quot;&quot;&lt;div&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;      &lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;test 1&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;test 2&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line"></span><br><span class="line">element = soup.div.stripped_strings</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(element))          <span class="comment"># [&#x27;test 1&#x27;, &#x27;test 2&#x27;]</span></span><br></pre></td></tr></table></figure>
<p><strong>2、父节点</strong></p>
<p><strong>parent</strong> <strong>属性</strong></p>
<p>　　parent 属性返回某个元素（tag、NavigableString）的父节点，文档的顶层节点的父节点是 BeautifulSoup 对象，BeautifulSoup 对象的父节点是 None。</p>
<p><strong>parents</strong> <strong>属性</strong></p>
<p>　　parent 属性递归得到元素的所有父辈节点，包括 BeautifulSoup 对象。</p>
<p><strong>3、兄弟节点</strong></p>
<p><strong>next_sibling</strong> <strong>和 previous_sibling</strong></p>
<p>　　next_sibling 返回后一个兄弟节点，previous_sibling 返回前一个兄弟节点。直接看个例子，注意别被换行缩进搅了局。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(<span class="string">&quot;&quot;&quot;&lt;div&gt;</span></span><br><span class="line"><span class="string">    &lt;p&gt;test 1&lt;/p&gt;&lt;b&gt;test 2&lt;/b&gt;&lt;h&gt;test 3&lt;/h&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.b.next_sibling)      <span class="comment"># &lt;h&gt;test 3&lt;/h&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.b.previous_sibling)  <span class="comment"># &lt;p&gt;test 1&lt;/p&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.h.next_sibling)      <span class="comment"># None</span></span><br></pre></td></tr></table></figure>
<p><strong>next_siblings</strong> <strong>和 previous_siblings</strong></p>
<p>　　next_siblings 返回后面的兄弟节点</p>
<p>　　previous_siblings　　返回前面的兄弟节点</p>
<p><strong>4、回退和前进</strong></p>
<p>　　把html解析看成依次解析标签的一连串事件，BeautifulSoup 提供了重现解析器初始化过程的方法。</p>
<p>　　next_element 属性指向解析过程中下一个被解析的对象（tag 或 NavigableString）。</p>
<p>　　previous_element 属性指向解析过程中前一个被解析的对象。</p>
<p>　　另外还有next_elements 和 previous_elements 属性，不赘述了。</p>
<p><strong>四、搜索</strong></p>
<p><strong>1、过滤器</strong></p>
<p>　　介绍 find_all() 方法前，先介绍一下过滤器的类型，这些过滤器贯穿整个搜索的API。过滤器可以被用在tag的name中，节点的属性中，字符串中或他们的混合中。</p>
<p>示例使用的 html 文档如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">html = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;div&gt;</span></span><br><span class="line"><span class="string">    &lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(html, <span class="string">&#x27;html.parser&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>字符串</strong></p>
<p>查找所有的<b>标签</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(<span class="string">&#x27;b&#x27;</span>)  <span class="comment"># [&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;]</span></span><br></pre></td></tr></table></figure>
<p><strong>正则表达式</strong></p>
<p>传入正则表达式作为参数，返回满足正则表达式的标签。下面例子中找出所有以b开头的标签。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(re.<span class="built_in">compile</span>(<span class="string">&quot;^b&quot;</span>))  <span class="comment"># [&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;]</span></span><br></pre></td></tr></table></figure>
<p><strong>列表</strong></p>
<p>传入列表参数，将返回与列表中任一元素匹配的内容。下面例子中找出所有\<a\>标签和\<b\>标签。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>])</span><br></pre></td></tr></table></figure>
<p><strong>True</strong></p>
<p>True可以匹配任何值，下面的代码查找到所有的tag，但是不会返回字符串节点。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<p><strong>方法</strong></p>
<p>如果没有合适过滤器，那么还可以自定义一个方法，方法只接受一个元素参数，如果这个方法返回True表示当前元素匹配被找到。下面示例返回所有包含 class 属性但不包含 id 属性的标签。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">has_class_but_no_id</span>(<span class="params">tag</span>):</span></span><br><span class="line">    <span class="keyword">return</span> tag.has_attr(<span class="string">&#x27;class&#x27;</span>) <span class="keyword">and</span> <span class="keyword">not</span> tag.has_attr(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.find_all(has_class_but_no_id))</span><br></pre></td></tr></table></figure>
<p>返回结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[&lt;p <span class="class"><span class="keyword">class</span>=&quot;<span class="title">title</span>&quot;&gt;&lt;<span class="title">b</span>&gt;<span class="title">The</span> <span class="title">Dormouse</span>&#x27;<span class="title">s</span> <span class="title">story</span>&lt;/<span class="title">b</span>&gt;&lt;/<span class="title">p</span>&gt;, &lt;<span class="title">p</span> <span class="title">class</span>=&quot;<span class="title">story</span>&quot;&gt;<span class="title">Once</span> <span class="title">upon</span> <span class="title">a</span> <span class="title">time</span> <span class="title">there</span> <span class="title">were</span> <span class="title">three</span> <span class="title">little</span> <span class="title">sisters</span>; <span class="title">and</span> <span class="title">their</span> <span class="title">names</span> <span class="title">were</span></span></span><br><span class="line"><span class="class">    &lt;<span class="title">a</span> <span class="title">class</span>=&quot;<span class="title">sister</span>&quot; <span class="title">href</span>=&quot;<span class="title">http</span>:</span>//example.com/elsie<span class="string">&quot; id=&quot;</span>link1<span class="string">&quot;&gt;Elsie&lt;/a&gt;,</span></span><br><span class="line"><span class="string">    &lt;a class=&quot;</span>siste<span class="string">r&quot; href=&quot;</span>http://example.com/lacie<span class="string">&quot; id=&quot;</span>link2<span class="string">&quot;&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">    &lt;a class=&quot;</span>siste<span class="string">r&quot; href=&quot;</span>http://example.com/tillie<span class="string">&quot; id=&quot;</span>link3<span class="string">&quot;&gt;Tillie&lt;/a&gt;&lt;/p&gt;]</span></span><br></pre></td></tr></table></figure>
<p>这个结果乍一看不对，<a>标签含有 id 属性，其实返回的 list 中只有2个元素，都是<p>标签，<a>标签是<p>标签的子节点。</p>
<p><strong>2、find 和 find_all</strong></p>
<p>　　搜索当前 tag 的所有 tag 子节点，并判断是否符合过滤器的条件</p>
<p>语法：</p>
<p>　　find(name=None, attrs={}, recursive=True, text=None, **kwargs)</p>
<p>　　find_all(name=None, attrs={}, recursive=True, text=None, limit=None, **kwargs)</p>
<p>参数：</p>
<p>　　name：查找所有名字为 name 的 tag，字符串对象会被自动忽略掉。上面过滤器示例中的参数都是 name 参数。当然，其他参数中也可以使用过滤器。</p>
<p>　　attrs：按属性名和值查找。传入字典，key 为属性名，value 为属性值。</p>
<p>　　recursive：是否递归遍历所有子孙节点，默认 True。</p>
<p>　　text：用于搜索字符串，会找到 .string 方法与 text 参数值相符的tag，通常配合正则表达式使用。也就是说，虽然参数名是 text，但实际上搜索的是 string 属性。</p>
<p>　　limit：限定返回列表的最大个数。</p>
<p>　　kwargs：如果一个指定名字的参数不是搜索内置的参数名，搜索时会把该参数当作 tag 的属性来搜索。这里注意，如果要按 class 属性搜索，因为 class 是 python 的保留字，需要写作 class_。</p>
<p>　　Tag 的有些属性在搜索中不能作为 kwargs 参数使用，比如 html5 中的 data-* 属性。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data_soup = BeautifulSoup(<span class="string">&#x27;&lt;div data-foo=&quot;value&quot;&gt;foo!&lt;/div&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data_soup.find_all(data-foo=<span class="string">&quot;value&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># SyntaxError: keyword can&#x27;t be an expression</span></span><br></pre></td></tr></table></figure>
<p>　　但是可以通过 attrs 参数传递：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data_soup = BeautifulSoup(<span class="string">&#x27;&lt;div data-foo=&quot;value&quot;&gt;foo!&lt;/div&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data_soup.find_all(attrs=&#123;<span class="string">&quot;data-foo&quot;</span>: <span class="string">&quot;value&quot;</span>&#125;))</span><br><span class="line"></span><br><span class="line"><span class="comment"># [&lt;div data-foo=&quot;value&quot;&gt;foo!&lt;/div&gt;]</span></span><br></pre></td></tr></table></figure>
<p>　　而按 class_ 查找时，只要一个CSS类名满足即可，如果写了多个CSS名称，那么顺序必须一致，而且不能跳跃。以下示例中，前三个可以查找到元素，后两个不可以。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">css_soup = BeautifulSoup(<span class="string">&#x27;&lt;p class=&quot;body bold strikeout&quot;&gt;&lt;/p&gt;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(css_soup.find_all(<span class="string">&quot;p&quot;</span>, class_=<span class="string">&quot;strikeout&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(css_soup.find_all(<span class="string">&quot;p&quot;</span>, class_=<span class="string">&quot;body&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(css_soup.find_all(<span class="string">&quot;p&quot;</span>, class_=<span class="string">&quot;body bold strikeout&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># [&lt;p class=&quot;body strikeout&quot;&gt;&lt;/p&gt;]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(css_soup.find_all(<span class="string">&quot;p&quot;</span>, class_=<span class="string">&quot;body strikeout&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(css_soup.find_all(<span class="string">&quot;p&quot;</span>, class_=<span class="string">&quot;strikeout body&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># []</span></span><br></pre></td></tr></table></figure>
<p><strong>3、像调用find_all()一样调用tag</strong></p>
<p>　　find_all() 几乎是 BeautifulSoup 中最常用的搜索方法，所以我们定义了它的简写方法。BeautifulSoup 对象和 tag 对象可以被当作一个方法来使用，这个方法的执行结果与调用这个对象的 find_all() 方法相同，下面两行代码是等价的:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">soup(<span class="string">&#x27;b&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>4、其他搜索方法</strong></p>
<p>find_parents()　　　　　 返回所有祖先节点</p>
<p>find_parent()　　　　　　返回直接父节点</p>
<p>find_next_siblings()　　 返回后面所有的兄弟节点</p>
<p>find_next_sibling()　　 返回后面的第一个兄弟节点</p>
<p>find_previous_siblings() 返回前面所有的兄弟节点</p>
<p>find_previous_sibling()　返回前面第一个兄弟节点</p>
<p>find_all_next()　　　　 返回节点后所有符合条件的节点</p>
<p>find_next()　　　　　　 返回节点后第一个符合条件的节点</p>
<p>find_all_previous()　　 返回节点前所有符合条件的节点</p>
<p>find_previous()　　　　 返回节点前所有符合条件的节点</p>
<p><strong>五、CSS选择器</strong></p>
<p>BeautifulSoup支持大部分的CSS选择器，这里直接用代码来演示。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">html = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;html&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;&lt;title&gt;标题&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string"> &lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;&lt;b&gt;标题&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"> &lt;div name=&quot;divlink&quot;&gt;</span></span><br><span class="line"><span class="string">  &lt;p&gt;</span></span><br><span class="line"><span class="string">   &lt;a href=&quot;http://example.com/1&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;链接1&lt;/a&gt;</span></span><br><span class="line"><span class="string">   &lt;a href=&quot;http://example.com/2&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;链接2&lt;/a&gt;</span></span><br><span class="line"><span class="string">   &lt;a href=&quot;http://example.com/3&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;链接3&lt;/a&gt;</span></span><br><span class="line"><span class="string">  &lt;/p&gt;</span></span><br><span class="line"><span class="string"> &lt;/div&gt;</span></span><br><span class="line"><span class="string"> &lt;p&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string"> &lt;div name=&#x27;dv2&#x27;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">soup = BeautifulSoup(html, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过tag查找</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;title&#x27;</span>))             <span class="comment"># [&lt;title&gt;标题&lt;/title&gt;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过tag逐层查找</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&quot;html head title&quot;</span>))   <span class="comment"># [&lt;title&gt;标题&lt;/title&gt;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过class查找</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;.sister&#x27;</span>))</span><br><span class="line"><span class="comment"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/1&quot; id=&quot;link1&quot;&gt;链接1&lt;/a&gt;,</span></span><br><span class="line"><span class="comment"># &lt;a class=&quot;sister&quot; href=&quot;http://example.com/2&quot; id=&quot;link2&quot;&gt;链接2&lt;/a&gt;,</span></span><br><span class="line"><span class="comment"># &lt;a class=&quot;sister&quot; href=&quot;http://example.com/3&quot; id=&quot;link3&quot;&gt;链接3&lt;/a&gt;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过id查找</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;#link1, #link2&#x27;</span>))</span><br><span class="line"><span class="comment"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/1&quot; id=&quot;link1&quot;&gt;链接1&lt;/a&gt;,</span></span><br><span class="line"><span class="comment"># &lt;a class=&quot;sister&quot; href=&quot;http://example.com/2&quot; id=&quot;link2&quot;&gt;链接2&lt;/a&gt;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 组合查找</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;p #link1&#x27;</span>))　　　　<span class="comment"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/1&quot; id=&quot;link1&quot;&gt;链接1&lt;/a&gt;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找直接子标签</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&quot;head &gt; title&quot;</span>))　 <span class="comment"># [&lt;title&gt;标题&lt;/title&gt;]</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&quot;p &gt; #link1&quot;</span>))　　 <span class="comment"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/1&quot; id=&quot;link1&quot;&gt;链接1&lt;/a&gt;]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&quot;p &gt; a:nth-of-type(2)&quot;</span>))　　<span class="comment"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/2&quot; id=&quot;link2&quot;&gt;链接2&lt;/a&gt;]</span></span><br><span class="line"><span class="comment"># nth-of-type 是CSS选择器</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找兄弟节点（向后查找）</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&quot;#link1 ~ .sister&quot;</span>))</span><br><span class="line"><span class="comment"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/2&quot; id=&quot;link2&quot;&gt;链接2&lt;/a&gt;,</span></span><br><span class="line"><span class="comment"># &lt;a class=&quot;sister&quot; href=&quot;http://example.com/3&quot; id=&quot;link3&quot;&gt;链接3&lt;/a&gt;]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&quot;#link1 + .sister&quot;</span>))</span><br><span class="line"><span class="comment"># [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/2&quot; id=&quot;link2&quot;&gt;链接2&lt;/a&gt;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过属性查找</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;a[href=&quot;http://example.com/1&quot;]&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ^ 以XX开头</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;a[href^=&quot;http://example.com/&quot;]&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># * 包含</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;a[href*=&quot;.com/&quot;]&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找包含指定属性的标签</span></span><br><span class="line"><span class="built_in">print</span>(soup.select(<span class="string">&#x27;[name]&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找第一个元素</span></span><br><span class="line"><span class="built_in">print</span>(soup.select_one(<span class="string">&quot;.sister&quot;</span>))</span><br></pre></td></tr></table></figure>

    </div>

    
    
    
        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
        </div>
    </div>
  </div>


      
      
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%A6%E7%BB%86%E4%BD%BF%E7%94%A8"><span class="nav-number">1.</span> <span class="nav-text">详细使用</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="yanglinqi"
      src="/images/headpic.jpg">
  <p class="site-author-name" itemprop="name">yanglinqi</p>
  <div class="site-description" itemprop="description">用于做笔记，对学过的知识总结</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">100</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/yanglinqi107" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yanglinqi107" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yanglinqi</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/velocity-animate@1/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  


  <script async src="/js/cursor/fireworks.js"></script>


</body>
</html>
